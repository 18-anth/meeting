{"code":"(this.webpackJsonpprueba=this.webpackJsonpprueba||[]).push([[0],{1658:function(e,t,n){},1666:function(e,t,n){},1671:function(e,t,n){\"use strict\";n.r(t);var a=n(0),i=n.n(a),o=n(17),c=n.n(o),r=n(15),s=n(12),l=n(22),d=n(21),u=n(6),h=n(27),g=n.n(h),f=n(41),m=n(102),b=n.n(m),j=n(103),v=n.n(j),p=n(1694),x=n(1690),w=n(1691),y=n(1692),O=n(119),S=n.n(O),C=n(120),k=n.n(C),M=n(122),A=n.n(M),D=n(123),T=n.n(D),V=n(124),U=n.n(V),E=n(125),N=n.n(E),W=n(121),F=n.n(W),L=n(126),R=n.n(L),J=n(1693),P=(n(1656),n(1695)),B=n(44),H=(n(1657),n(1658),n(4)),I={},z={iceServers:[{urls:\"stun:stun.l.google.com:19302\"}]},q=null,G=null,Y=0,$=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).getPermissions=Object(f.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0}).then((function(){return a.videoAvailable=!0})).catch((function(){return a.videoAvailable=!1}));case 3:return e.next=5,navigator.mediaDevices.getUserMedia({audio:!0}).then((function(){return a.audioAvailable=!0})).catch((function(){return a.audioAvailable=!1}));case 5:navigator.mediaDevices.getDisplayMedia?a.setState({screenAvailable:!0}):a.setState({screenAvailable:!1}),(a.videoAvailable||a.audioAvailable)&&navigator.mediaDevices.getUserMedia({video:a.videoAvailable,audio:a.audioAvailable}).then((function(e){window.localStream=e,a.localVideoref.current.srcObject=e})).then((function(e){})).catch((function(e){return console.log(e)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case\"end\":return e.stop()}}),e,null,[[0,9]])}))),a.getMedia=function(){a.setState({video:a.videoAvailable,audio:a.audioAvailable},(function(){a.getUserMedia(),a.connectToSocketServer()}))},a.getUserMedia=function(){if(a.state.video&&a.videoAvailable||a.state.audio&&a.audioAvailable)navigator.mediaDevices.getUserMedia({video:a.state.video,audio:a.state.audio}).then(a.getUserMediaSuccess).then((function(e){})).catch((function(e){return console.log(e)}));else try{a.localVideoref.current.srcObject.getTracks().forEach((function(e){return e.stop()}))}catch(e){}},a.getUserMediaSuccess=function(e){try{window.localStream.getTracks().forEach((function(e){return e.stop()}))}catch(i){console.log(i)}window.localStream=e,a.localVideoref.current.srcObject=e;var t=function(e){if(e===G)return\"continue\";I[e].addStream(window.localStream),I[e].createOffer().then((function(t){I[e].setLocalDescription(t).then((function(){q.emit(\"signal\",e,JSON.stringify({sdp:I[e].localDescription}))})).catch((function(e){return console.log(e)}))}))};for(var n in I)t(n);e.getTracks().forEach((function(e){return e.onended=function(){a.setState({video:!1,audio:!1},(function(){try{a.localVideoref.current.srcObject.getTracks().forEach((function(e){return e.stop()}))}catch(i){console.log(i)}window.localStream=function(){var e;return new MediaStream([(e=a).black.apply(e,arguments),a.silence()])}(),a.localVideoref.current.srcObject=window.localStream;var e=function(e){I[e].addStream(window.localStream),I[e].createOffer().then((function(t){I[e].setLocalDescription(t).then((function(){q.emit(\"signal\",e,JSON.stringify({sdp:I[e].localDescription}))})).catch((function(e){return console.log(e)}))}))};for(var t in I)e(t)}))}}))},a.getDislayMedia=function(){a.state.screen&&navigator.mediaDevices.getDisplayMedia&&navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}).then(a.getDislayMediaSuccess).then((function(e){})).catch((function(e){return console.log(e)}))},a.getDislayMediaSuccess=function(e){try{window.localStream.getTracks().forEach((function(e){return e.stop()}))}catch(i){console.log(i)}window.localStream=e,a.localVideoref.current.srcObject=e;var t=function(e){if(e===G)return\"continue\";I[e].addStream(window.localStream),I[e].createOffer().then((function(t){I[e].setLocalDescription(t).then((function(){q.emit(\"signal\",e,JSON.stringify({sdp:I[e].localDescription}))})).catch((function(e){return console.log(e)}))}))};for(var n in I)t(n);e.getTracks().forEach((function(e){return e.onended=function(){a.setState({screen:!1},(function(){try{a.localVideoref.current.srcObject.getTracks().forEach((function(e){return e.stop()}))}catch(i){console.log(i)}window.localStream=function(){var e;return new MediaStream([(e=a).black.apply(e,arguments),a.silence()])}(),a.localVideoref.current.srcObject=window.localStream,a.getUserMedia()}))}}))},a.gotMessageFromServer=function(e,t){var n=JSON.parse(t);e!==G&&(n.sdp&&I[e].setRemoteDescription(new RTCSessionDescription(n.sdp)).then((function(){\"offer\"===n.sdp.type&&I[e].createAnswer().then((function(t){I[e].setLocalDescription(t).then((function(){q.emit(\"signal\",e,JSON.stringify({sdp:I[e].localDescription}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)})),n.ice&&I[e].addIceCandidate(new RTCIceCandidate(n.ice)).catch((function(e){return console.log(e)})))},a.changeCssVideos=function(e){var t=\"30%\";30*e.offsetWidth/100<300&&(t=\"300px\");var n=String(100/Y)+\"%\",a=\"\";0===Y||1===Y?(a=\"100%\",n=\"100%\"):2===Y?(a=\"45%\",n=\"100%\"):3===Y||4===Y?(a=\"35%\",n=\"50%\"):a=String(100/Y)+\"%\";for(var i=e.querySelectorAll(\"video\"),o=0;o<i.length;++o)i[o].style.minWidth=t,i[o].style.minHeight=\"40%\",i[o].style.setProperty(\"width\",a),i[o].style.setProperty(\"height\",n);return{minWidth:t,minHeight:\"40%\",width:a,height:n}},a.connectToSocketServer=function(){(q=b.a.connect(\"https://video.sebastienbiollo.com\",{secure:!0})).on(\"signal\",a.gotMessageFromServer),q.on(\"connect\",(function(){q.emit(\"join-call\",window.location.href),G=q.id,q.on(\"chat-message\",a.addMessage),q.on(\"user-left\",(function(e){var t=document.querySelector('[data-socket=\"'.concat(e,'\"]'));if(null!==t){Y--,t.parentNode.removeChild(t);var n=document.getElementById(\"main\");a.changeCssVideos(n)}})),q.on(\"user-joined\",(function(e,t){if(t.forEach((function(e){if(I[e]=new RTCPeerConnection(z),I[e].onicecandidate=function(t){null!=t.candidate&&q.emit(\"signal\",e,JSON.stringify({ice:t.candidate}))},I[e].onaddstream=function(n){var i=document.querySelector('[data-socket=\"'.concat(e,'\"]'));if(null!==i)i.srcObject=n.stream;else{Y=t.length;var o=document.getElementById(\"main\"),c=a.changeCssVideos(o),r=document.createElement(\"video\"),s={minWidth:c.minWidth,minHeight:c.minHeight,maxHeight:\"100%\",margin:\"10px\",borderStyle:\"solid\",borderColor:\"#bdbdbd\",objectFit:\"fill\"};for(var l in s)r.style[l]=s[l];r.style.setProperty(\"width\",c.width),r.style.setProperty(\"height\",c.height),r.setAttribute(\"data-socket\",e),r.srcObject=n.stream,r.autoplay=!0,r.playsinline=!0,o.appendChild(r)}},void 0!==window.localStream&&null!==window.localStream)I[e].addStream(window.localStream);else{window.localStream=function(){var e;return new MediaStream([(e=a).black.apply(e,arguments),a.silence()])}(),I[e].addStream(window.localStream)}})),e===G){var n=function(e){if(e===G)return\"continue\";try{I[e].addStream(window.localStream)}catch(t){}I[e].createOffer().then((function(t){I[e].setLocalDescription(t).then((function(){q.emit(\"signal\",e,JSON.stringify({sdp:I[e].localDescription}))})).catch((function(e){return console.log(e)}))}))};for(var i in I)n(i)}}))}))},a.silence=function(){var e=new AudioContext,t=e.createOscillator(),n=t.connect(e.createMediaStreamDestination());return t.start(),e.resume(),Object.assign(n.stream.getAudioTracks()[0],{enabled:!1})},a.black=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=void 0===t?640:t,a=e.height,i=void 0===a?480:a,o=Object.assign(document.createElement(\"canvas\"),{width:n,height:i});o.getContext(\"2d\").fillRect(0,0,n,i);var c=o.captureStream();return Object.assign(c.getVideoTracks()[0],{enabled:!1})},a.handleVideo=function(){return a.setState({video:!a.state.video},(function(){return a.getUserMedia()}))},a.handleAudio=function(){return a.setState({audio:!a.state.audio},(function(){return a.getUserMedia()}))},a.handleScreen=function(){return a.setState({screen:!a.state.screen},(function(){return a.getDislayMedia()}))},a.handleEndCall=function(){try{a.localVideoref.current.srcObject.getTracks().forEach((function(e){return e.stop()}))}catch(e){}window.location.href=\"/\"},a.openChat=function(){return a.setState({showModal:!0,newmessages:0})},a.closeChat=function(){return a.setState({showModal:!1})},a.handleMessage=function(e){return a.setState({message:e.target.value})},a.addMessage=function(e,t,n){a.setState((function(n){return{messages:[].concat(Object(u.a)(n.messages),[{sender:t,data:e}])}})),n!==G&&a.setState({newmessages:a.state.newmessages+1})},a.handleUsername=function(e){return a.setState({username:e.target.value})},a.sendMessage=function(){q.emit(\"chat-message\",a.state.message,a.state.username),a.setState({message:\"\",sender:a.state.username})},a.copyUrl=function(){var e=window.location.href;if(navigator.clipboard)navigator.clipboard.writeText(e).then((function(){J.b.success(\"Link copied to clipboard!\")}),(function(){J.b.error(\"Failed to copy\")}));else{var t=document.createElement(\"textarea\");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand(\"copy\"),J.b.success(\"Link copied to clipboard!\")}catch(n){J.b.error(\"Failed to copy\")}document.body.removeChild(t)}},a.connect=function(){return a.setState({askForUsername:!1},(function(){return a.getMedia()}))},a.isChrome=function(){var e=(navigator&&(navigator.userAgent||\"\")).toLowerCase(),t=(navigator&&(navigator.vendor||\"\")).toLowerCase();return null!==(/google inc/.test(t)?e.match(/(?:chrome|crios)\\/(\\d+)/):null)},a.localVideoref=i.a.createRef(),a.videoAvailable=!1,a.audioAvailable=!1,a.state={video:!1,audio:!1,screen:!1,showModal:!1,screenAvailable:!1,messages:[],message:\"\",newmessages:0,askForUsername:!0,username:v.a.internet.userName()},I={},a.getPermissions(),a}return Object(s.a)(n,[{key:\"render\",value:function(){var e=this;return!1===this.isChrome()?Object(H.jsx)(\"div\",{style:{background:\"white\",width:\"30%\",height:\"auto\",padding:\"20px\",minWidth:\"400px\",textAlign:\"center\",margin:\"auto\",marginTop:\"50px\",justifyContent:\"center\"},children:Object(H.jsx)(\"h1\",{children:\"Sorry, this works only with Google Chrome\"})}):Object(H.jsx)(\"div\",{children:!0===this.state.askForUsername?Object(H.jsxs)(\"div\",{children:[Object(H.jsxs)(\"div\",{style:{background:\"white\",width:\"30%\",height:\"auto\",padding:\"20px\",minWidth:\"400px\",textAlign:\"center\",margin:\"auto\",marginTop:\"50px\",justifyContent:\"center\"},children:[Object(H.jsx)(\"p\",{style:{margin:0,fontWeight:\"bold\",paddingRight:\"50px\"},children:\"Set your username\"}),Object(H.jsx)(p.a,{placeholder:\"Username\",value:this.state.username,onChange:function(t){return e.handleUsername(t)}}),Object(H.jsx)(x.a,{variant:\"contained\",color:\"primary\",onClick:this.connect,style:{margin:\"20px\"},children:\"Connect\"})]}),Object(H.jsx)(\"div\",{style:{justifyContent:\"center\",textAlign:\"center\",paddingTop:\"40px\",alignItems:\"center\"},children:Object(H.jsx)(\"video\",{id:\"my-video\",ref:this.localVideoref,autoPlay:!0,muted:!0,style:{borderStyle:\"solid\",borderColor:\"#bdbdbd\",objectFit:\"fill\",width:\"30%\",height:\"30%\"}})})]}):Object(H.jsxs)(\"div\",{children:[Object(H.jsxs)(\"div\",{className:\"btn-down\",style:{backgroundColor:\"whitesmoke\",color:\"whitesmoke\",textAlign:\"center\"},children:[Object(H.jsx)(w.a,{style:{color:\"#424242\"},onClick:this.handleVideo,children:!0===this.state.video?Object(H.jsx)(S.a,{}):Object(H.jsx)(k.a,{})}),Object(H.jsx)(w.a,{style:{color:\"#f44336\"},onClick:this.handleEndCall,children:Object(H.jsx)(F.a,{})}),Object(H.jsx)(w.a,{style:{color:\"#424242\"},onClick:this.handleAudio,children:!0===this.state.audio?Object(H.jsx)(A.a,{}):Object(H.jsx)(T.a,{})}),!0===this.state.screenAvailable?Object(H.jsx)(w.a,{style:{color:\"#424242\"},onClick:this.handleScreen,children:!0===this.state.screen?Object(H.jsx)(U.a,{}):Object(H.jsx)(N.a,{})}):null,Object(H.jsx)(y.a,{badgeContent:this.state.newmessages,max:999,color:\"secondary\",onClick:this.openChat,children:Object(H.jsx)(w.a,{style:{color:\"#424242\"},onClick:this.openChat,children:Object(H.jsx)(R.a,{})})})]}),Object(H.jsxs)(B.a,{show:this.state.showModal,onHide:this.closeChat,style:{zIndex:\"999999\"},children:[Object(H.jsx)(B.a.Header,{closeButton:!0,children:Object(H.jsx)(B.a.Title,{children:\"Chat Room\"})}),Object(H.jsx)(B.a.Body,{style:{overflow:\"auto\",overflowY:\"auto\",height:\"400px\",textAlign:\"left\"},children:this.state.messages.length>0?this.state.messages.map((function(e,t){return Object(H.jsx)(\"div\",{style:{textAlign:\"left\"},children:Object(H.jsxs)(\"p\",{style:{wordBreak:\"break-all\"},children:[Object(H.jsx)(\"b\",{children:e.sender}),\": \",e.data]})},t)})):Object(H.jsx)(\"p\",{children:\"No message yet\"})}),Object(H.jsxs)(B.a.Footer,{className:\"div-send-msg\",children:[Object(H.jsx)(p.a,{placeholder:\"Message\",value:this.state.message,onChange:function(t){return e.handleMessage(t)}}),Object(H.jsx)(x.a,{variant:\"contained\",color:\"primary\",onClick:this.sendMessage,children:\"Send\"})]})]}),Object(H.jsxs)(\"div\",{className:\"container\",children:[Object(H.jsxs)(\"div\",{style:{paddingTop:\"20px\"},children:[Object(H.jsx)(p.a,{value:window.location.href,disable:\"true\"}),Object(H.jsx)(x.a,{style:{backgroundColor:\"#3f51b5\",color:\"whitesmoke\",marginLeft:\"20px\",marginTop:\"10px\",width:\"120px\",fontSize:\"10px\"},onClick:this.copyUrl,children:\"Copy invite link\"})]}),Object(H.jsx)(P.a,{id:\"main\",className:\"flex-container\",style:{margin:0,padding:0},children:Object(H.jsx)(\"video\",{id:\"my-video\",ref:this.localVideoref,autoPlay:!0,muted:!0,style:{borderStyle:\"solid\",borderColor:\"#bdbdbd\",margin:\"10px\",objectFit:\"fill\",width:\"50%\",height:\"50%\"}})})]})]})})}}]),n}(a.Component),K=n(127),Q=n.n(K),X=(n(1666),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleChange=function(e){return a.setState({url:e.target.value})},a.join=function(){if(\"\"!==a.state.url){var e=a.state.url.split(\"/\");window.location.href=\"/\".concat(e[e.length-1])}else{e=Math.random().toString(36).substring(2,7);window.location.href=\"/\".concat(e)}},a.state={url:\"\"},a}return Object(s.a)(n,[{key:\"render\",value:function(){var e=this;return Object(H.jsxs)(\"div\",{className:\"container2\",children:[Object(H.jsxs)(\"div\",{style:{display:\" none\",fontSize:\"14px\",background:\"white\",width:\"10%\",textAlign:\"center\",margin:\"auto\",marginBottom:\"10px\"},children:[\"Source code:\",Object(H.jsx)(w.a,{style:{color:\"black\"},onClick:function(){return window.location.href=\"https://github.com/0x5eba/Video-Meeting\"},children:Object(H.jsx)(Q.a,{})})]}),Object(H.jsxs)(\"div\",{children:[Object(H.jsx)(\"h1\",{style:{fontSize:\"45px\"},children:\"Video Meeting\"}),Object(H.jsx)(\"p\",{style:{fontWeight:\"200\"},children:\"Video conference website that lets you stay in touch with all your friends.\"})]}),Object(H.jsxs)(\"div\",{style:{background:\"white\",width:\"30%\",height:\"auto\",padding:\"20px\",minWidth:\"400px\",textAlign:\"center\",margin:\"auto\",marginTop:\"100px\"},children:[Object(H.jsx)(\"p\",{style:{margin:0,fontWeight:\"bold\",paddingRight:\"50px\"},children:\"Start or join a meeting\"}),Object(H.jsx)(p.a,{placeholder:\"URL\",onChange:function(t){return e.handleChange(t)}}),Object(H.jsx)(x.a,{variant:\"contained\",color:\"primary\",onClick:this.join,style:{margin:\"20px\"},children:\"Go\"})]})]})}}]),n}(a.Component)),Z=n(128),_=n(14),ee=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:\"render\",value:function(){return Object(H.jsx)(H.Fragment,{children:Object(H.jsx)(\"div\",{children:Object(H.jsx)(Z.a,{children:Object(H.jsxs)(_.c,{children:[Object(H.jsx)(_.a,{path:\"/\",exact:!0,component:X}),Object(H.jsx)(_.a,{path:\"/:url\",component:$})]})})})})}}]),n}(a.Component);Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(H.jsx)(ee,{}),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[1671,1,2]]]);","name":"static/js/main.912ac90a.chunk.js","map":{"version":3,"sources":["static/js/main.912ac90a.chunk.js"],"names":["this","push","1658","module","exports","__webpack_require__","1666","1671","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","classCallCheck","createClass","inherits","createSuper","toConsumableArray","regenerator","regenerator_default","asyncToGenerator","build","build_default","faker","faker_default","Input","Button","IconButton","Badge","Videocam","Videocam_default","VideocamOff","VideocamOff_default","Mic","Mic_default","MicOff","MicOff_default","ScreenShare","ScreenShare_default","StopScreenShare","StopScreenShare_default","CallEnd","CallEnd_default","Chat","Chat_default","message","Row","Modal","jsx_runtime","connections","peerConnectionConfig","iceServers","urls","socket","socketId","elms","pages_screens_Video","_Component","Object","Video","_super","props","_this","call","getPermissions","a","mark","_callee","wrap","_context","prev","next","navigator","mediaDevices","getUserMedia","video","then","videoAvailable","catch","audio","audioAvailable","getDisplayMedia","setState","screenAvailable","stream","window","localStream","localVideoref","current","srcObject","e","console","log","t0","stop","getMedia","connectToSocketServer","state","getUserMediaSuccess","getTracks","forEach","track","_loop","id","addStream","createOffer","description","setLocalDescription","emit","JSON","stringify","sdp","localDescription","onended","_this2","MediaStream","black","apply","arguments","silence","blackSilence","_loop2","_id","getDislayMedia","screen","getDislayMediaSuccess","_loop3","_this3","gotMessageFromServer","fromId","signal","parse","setRemoteDescription","RTCSessionDescription","type","createAnswer","ice","addIceCandidate","RTCIceCandidate","changeCssVideos","main","minWidth","offsetWidth","height","String","width","videos","querySelectorAll","length","style","minHeight","setProperty","connect","secure","on","location","href","addMessage","document","querySelector","concat","parentNode","removeChild","getElementById","clients","socketListId","RTCPeerConnection","onicecandidate","event","candidate","onaddstream","searchVidep","cssMesure","createElement","css","maxHeight","margin","borderStyle","borderColor","objectFit","i","setAttribute","autoplay","playsinline","appendChild","undefined","_this4","_loop4","id2","ctx","AudioContext","oscillator","createOscillator","dst","createMediaStreamDestination","start","resume","assign","getAudioTracks","enabled","_ref2","_ref2$width","_ref2$height","canvas","getContext","fillRect","captureStream","getVideoTracks","handleVideo","handleAudio","handleScreen","handleEndCall","openChat","showModal","newmessages","closeChat","handleMessage","target","value","data","sender","socketIdSender","prevState","messages","handleUsername","username","sendMessage","copyUrl","text","clipboard","writeText","success","error","textArea","body","focus","select","execCommand","err","askForUsername","isChrome","userAgent","toLowerCase","vendor","test","match","createRef","internet","userName","key","_this5","background","padding","textAlign","marginTop","justifyContent","children","fontWeight","paddingRight","placeholder","onChange","variant","color","onClick","paddingTop","alignItems","ref","autoPlay","muted","className","backgroundColor","badgeContent","max","show","onHide","zIndex","Header","closeButton","Title","Body","overflow","overflowY","map","item","index","wordBreak","Footer","disable","marginLeft","fontSize","GitHub","GitHub_default","pages_screens_Home","Home","handleChange","url","join","split","Math","random","toString","substring","display","marginBottom","react_router_dom","react_router","src_App","App","path","exact","component","Boolean","hostname","render","serviceWorker","ready","registration","unregister"],"mappings":"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"},"input":"(this[\"webpackJsonpprueba\"] = this[\"webpackJsonpprueba\"] || []).push([[0],{\n\n/***/ 1658:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 1666:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 1671:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(17);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(15);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/inherits.js + 1 modules\nvar inherits = __webpack_require__(22);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createSuper.js + 2 modules\nvar createSuper = __webpack_require__(21);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 2 modules\nvar toConsumableArray = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(27);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(41);\n\n// EXTERNAL MODULE: ./node_modules/socket.io-client/build/index.js\nvar build = __webpack_require__(102);\nvar build_default = /*#__PURE__*/__webpack_require__.n(build);\n\n// EXTERNAL MODULE: ./node_modules/faker/index.js\nvar faker = __webpack_require__(103);\nvar faker_default = /*#__PURE__*/__webpack_require__.n(faker);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Input/Input.js + 5 modules\nvar Input = __webpack_require__(1694);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Button/Button.js\nvar Button = __webpack_require__(1690);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/IconButton/IconButton.js\nvar IconButton = __webpack_require__(1691);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Badge/Badge.js\nvar Badge = __webpack_require__(1692);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/icons/Videocam.js\nvar Videocam = __webpack_require__(119);\nvar Videocam_default = /*#__PURE__*/__webpack_require__.n(Videocam);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/icons/VideocamOff.js\nvar VideocamOff = __webpack_require__(120);\nvar VideocamOff_default = /*#__PURE__*/__webpack_require__.n(VideocamOff);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/icons/Mic.js\nvar Mic = __webpack_require__(122);\nvar Mic_default = /*#__PURE__*/__webpack_require__.n(Mic);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/icons/MicOff.js\nvar MicOff = __webpack_require__(123);\nvar MicOff_default = /*#__PURE__*/__webpack_require__.n(MicOff);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/icons/ScreenShare.js\nvar ScreenShare = __webpack_require__(124);\nvar ScreenShare_default = /*#__PURE__*/__webpack_require__.n(ScreenShare);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/icons/StopScreenShare.js\nvar StopScreenShare = __webpack_require__(125);\nvar StopScreenShare_default = /*#__PURE__*/__webpack_require__.n(StopScreenShare);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/icons/CallEnd.js\nvar CallEnd = __webpack_require__(121);\nvar CallEnd_default = /*#__PURE__*/__webpack_require__.n(CallEnd);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/icons/Chat.js\nvar Chat = __webpack_require__(126);\nvar Chat_default = /*#__PURE__*/__webpack_require__.n(Chat);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/message/index.js + 86 modules\nvar message = __webpack_require__(1693);\n\n// EXTERNAL MODULE: ./node_modules/antd/dist/antd.css\nvar antd = __webpack_require__(1656);\n\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/Row.js + 3 modules\nvar Row = __webpack_require__(1695);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Modal.js + 54 modules\nvar Modal = __webpack_require__(44);\n\n// EXTERNAL MODULE: ./node_modules/bootstrap/dist/css/bootstrap.css\nvar bootstrap = __webpack_require__(1657);\n\n// EXTERNAL MODULE: ./src/components/pages/screens/Video.css\nvar screens_Video = __webpack_require__(1658);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(4);\n\n// CONCATENATED MODULE: ./src/components/pages/screens/Video.js\nvar server_url= true?'https://video.sebastienbiollo.com':undefined;var connections={};var peerConnectionConfig={'iceServers':[// { 'urls': 'stun:stun.services.mozilla.com' },\n{'urls':'stun:stun.l.google.com:19302'}]};var socket=null;var socketId=null;var elms=0;var Video_Video=/*#__PURE__*/function(_Component){Object(inherits[\"a\" /* default */])(Video,_Component);var _super=Object(createSuper[\"a\" /* default */])(Video);function Video(props){var _this;Object(classCallCheck[\"a\" /* default */])(this,Video);_this=_super.call(this,props);_this.getPermissions=/*#__PURE__*/Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return navigator.mediaDevices.getUserMedia({video:true}).then(function(){return _this.videoAvailable=true;}).catch(function(){return _this.videoAvailable=false;});case 3:_context.next=5;return navigator.mediaDevices.getUserMedia({audio:true}).then(function(){return _this.audioAvailable=true;}).catch(function(){return _this.audioAvailable=false;});case 5:if(navigator.mediaDevices.getDisplayMedia){_this.setState({screenAvailable:true});}else{_this.setState({screenAvailable:false});}if(_this.videoAvailable||_this.audioAvailable){navigator.mediaDevices.getUserMedia({video:_this.videoAvailable,audio:_this.audioAvailable}).then(function(stream){window.localStream=stream;_this.localVideoref.current.srcObject=stream;}).then(function(stream){}).catch(function(e){return console.log(e);});}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));_this.getMedia=function(){_this.setState({video:_this.videoAvailable,audio:_this.audioAvailable},function(){_this.getUserMedia();_this.connectToSocketServer();});};_this.getUserMedia=function(){if(_this.state.video&&_this.videoAvailable||_this.state.audio&&_this.audioAvailable){navigator.mediaDevices.getUserMedia({video:_this.state.video,audio:_this.state.audio}).then(_this.getUserMediaSuccess).then(function(stream){}).catch(function(e){return console.log(e);});}else{try{var tracks=_this.localVideoref.current.srcObject.getTracks();tracks.forEach(function(track){return track.stop();});}catch(e){}}};_this.getUserMediaSuccess=function(stream){try{window.localStream.getTracks().forEach(function(track){return track.stop();});}catch(e){console.log(e);}window.localStream=stream;_this.localVideoref.current.srcObject=stream;var _loop=function _loop(id){if(id===socketId)return\"continue\";connections[id].addStream(window.localStream);// eslint-disable-next-line no-loop-func\nconnections[id].createOffer().then(function(description){connections[id].setLocalDescription(description).then(function(){socket.emit('signal',id,JSON.stringify({'sdp':connections[id].localDescription}));}).catch(function(e){return console.log(e);});});};for(var id in connections){var _ret=_loop(id);if(_ret===\"continue\")continue;}stream.getTracks().forEach(function(track){return track.onended=function(){_this.setState({video:false,audio:false},function(){try{var tracks=_this.localVideoref.current.srcObject.getTracks();tracks.forEach(function(track){return track.stop();});}catch(e){console.log(e);}var blackSilence=function blackSilence(){var _this2;return new MediaStream([(_this2=_this).black.apply(_this2,arguments),_this.silence()]);};window.localStream=blackSilence();_this.localVideoref.current.srcObject=window.localStream;var _loop2=function _loop2(_id){connections[_id].addStream(window.localStream);// eslint-disable-next-line no-loop-func\nconnections[_id].createOffer().then(function(description){connections[_id].setLocalDescription(description).then(function(){socket.emit('signal',_id,JSON.stringify({'sdp':connections[_id].localDescription}));}).catch(function(e){return console.log(e);});});};for(var _id in connections){_loop2(_id);}});};});};_this.getDislayMedia=function(){if(_this.state.screen){if(navigator.mediaDevices.getDisplayMedia){navigator.mediaDevices.getDisplayMedia({video:true,audio:true}).then(_this.getDislayMediaSuccess).then(function(stream){}).catch(function(e){return console.log(e);});}}};_this.getDislayMediaSuccess=function(stream){try{window.localStream.getTracks().forEach(function(track){return track.stop();});}catch(e){console.log(e);}window.localStream=stream;_this.localVideoref.current.srcObject=stream;var _loop3=function _loop3(id){if(id===socketId)return\"continue\";connections[id].addStream(window.localStream);// eslint-disable-next-line no-loop-func\nconnections[id].createOffer().then(function(description){connections[id].setLocalDescription(description).then(function(){socket.emit('signal',id,JSON.stringify({'sdp':connections[id].localDescription}));}).catch(function(e){return console.log(e);});});};for(var id in connections){var _ret2=_loop3(id);if(_ret2===\"continue\")continue;}stream.getTracks().forEach(function(track){return track.onended=function(){_this.setState({screen:false},function(){try{var tracks=_this.localVideoref.current.srcObject.getTracks();tracks.forEach(function(track){return track.stop();});}catch(e){console.log(e);}var blackSilence=function blackSilence(){var _this3;return new MediaStream([(_this3=_this).black.apply(_this3,arguments),_this.silence()]);};window.localStream=blackSilence();_this.localVideoref.current.srcObject=window.localStream;_this.getUserMedia();});};});};_this.gotMessageFromServer=function(fromId,message){var signal=JSON.parse(message);if(fromId!==socketId){if(signal.sdp){connections[fromId].setRemoteDescription(new RTCSessionDescription(signal.sdp)).then(function(){if(signal.sdp.type==='offer'){connections[fromId].createAnswer().then(function(description){connections[fromId].setLocalDescription(description).then(function(){socket.emit('signal',fromId,JSON.stringify({'sdp':connections[fromId].localDescription}));}).catch(function(e){return console.log(e);});}).catch(function(e){return console.log(e);});}}).catch(function(e){return console.log(e);});}if(signal.ice){connections[fromId].addIceCandidate(new RTCIceCandidate(signal.ice)).catch(function(e){return console.log(e);});}}};_this.changeCssVideos=function(main){var widthMain=main.offsetWidth;var minWidth=\"30%\";if(widthMain*30/100<300){minWidth=\"300px\";}var minHeight=\"40%\";var height=String(100/elms)+\"%\";var width=\"\";if(elms===0||elms===1){width=\"100%\";height=\"100%\";}else if(elms===2){width=\"45%\";height=\"100%\";}else if(elms===3||elms===4){width=\"35%\";height=\"50%\";}else{width=String(100/elms)+\"%\";}var videos=main.querySelectorAll(\"video\");for(var a=0;a<videos.length;++a){videos[a].style.minWidth=minWidth;videos[a].style.minHeight=minHeight;videos[a].style.setProperty(\"width\",width);videos[a].style.setProperty(\"height\",height);}return{minWidth:minWidth,minHeight:minHeight,width:width,height:height};};_this.connectToSocketServer=function(){socket=build_default.a.connect(server_url,{secure:true});socket.on('signal',_this.gotMessageFromServer);socket.on('connect',function(){socket.emit('join-call',window.location.href);socketId=socket.id;socket.on('chat-message',_this.addMessage);socket.on('user-left',function(id){var video=document.querySelector(\"[data-socket=\\\"\".concat(id,\"\\\"]\"));if(video!==null){elms--;video.parentNode.removeChild(video);var main=document.getElementById('main');_this.changeCssVideos(main);}});socket.on('user-joined',function(id,clients){clients.forEach(function(socketListId){connections[socketListId]=new RTCPeerConnection(peerConnectionConfig);// Wait for their ice candidate       \nconnections[socketListId].onicecandidate=function(event){if(event.candidate!=null){socket.emit('signal',socketListId,JSON.stringify({'ice':event.candidate}));}};// Wait for their video stream\nconnections[socketListId].onaddstream=function(event){// TODO mute button, full screen button\nvar searchVidep=document.querySelector(\"[data-socket=\\\"\".concat(socketListId,\"\\\"]\"));if(searchVidep!==null){// if i don't do this check it make an empyt square\nsearchVidep.srcObject=event.stream;}else{elms=clients.length;var main=document.getElementById('main');var cssMesure=_this.changeCssVideos(main);var video=document.createElement('video');var css={minWidth:cssMesure.minWidth,minHeight:cssMesure.minHeight,maxHeight:\"100%\",margin:\"10px\",borderStyle:\"solid\",borderColor:\"#bdbdbd\",objectFit:\"fill\"};for(var i in css){video.style[i]=css[i];}video.style.setProperty(\"width\",cssMesure.width);video.style.setProperty(\"height\",cssMesure.height);video.setAttribute('data-socket',socketListId);video.srcObject=event.stream;video.autoplay=true;video.playsinline=true;main.appendChild(video);}};// Add the local video stream\nif(window.localStream!==undefined&&window.localStream!==null){connections[socketListId].addStream(window.localStream);}else{var blackSilence=function blackSilence(){var _this4;return new MediaStream([(_this4=_this).black.apply(_this4,arguments),_this.silence()]);};window.localStream=blackSilence();connections[socketListId].addStream(window.localStream);}});if(id===socketId){var _loop4=function _loop4(id2){if(id2===socketId)return\"continue\";try{connections[id2].addStream(window.localStream);}catch(e){}// eslint-disable-next-line no-loop-func\nconnections[id2].createOffer().then(function(description){connections[id2].setLocalDescription(description).then(function(){socket.emit('signal',id2,JSON.stringify({'sdp':connections[id2].localDescription}));}).catch(function(e){return console.log(e);});});};for(var id2 in connections){var _ret3=_loop4(id2);if(_ret3===\"continue\")continue;}}});});};_this.silence=function(){var ctx=new AudioContext();var oscillator=ctx.createOscillator();var dst=oscillator.connect(ctx.createMediaStreamDestination());oscillator.start();ctx.resume();return Object.assign(dst.stream.getAudioTracks()[0],{enabled:false});};_this.black=function(){var _ref2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref2$width=_ref2.width,width=_ref2$width===void 0?640:_ref2$width,_ref2$height=_ref2.height,height=_ref2$height===void 0?480:_ref2$height;var canvas=Object.assign(document.createElement(\"canvas\"),{width:width,height:height});canvas.getContext('2d').fillRect(0,0,width,height);var stream=canvas.captureStream();return Object.assign(stream.getVideoTracks()[0],{enabled:false});};_this.handleVideo=function(){return _this.setState({video:!_this.state.video},function(){return _this.getUserMedia();});};_this.handleAudio=function(){return _this.setState({audio:!_this.state.audio},function(){return _this.getUserMedia();});};_this.handleScreen=function(){return _this.setState({screen:!_this.state.screen},function(){return _this.getDislayMedia();});};_this.handleEndCall=function(){try{var tracks=_this.localVideoref.current.srcObject.getTracks();tracks.forEach(function(track){return track.stop();});}catch(e){}window.location.href=\"/\";};_this.openChat=function(){return _this.setState({showModal:true,newmessages:0});};_this.closeChat=function(){return _this.setState({showModal:false});};_this.handleMessage=function(e){return _this.setState({message:e.target.value});};_this.addMessage=function(data,sender,socketIdSender){_this.setState(function(prevState){return{messages:[].concat(Object(toConsumableArray[\"a\" /* default */])(prevState.messages),[{\"sender\":sender,\"data\":data}])};});if(socketIdSender!==socketId){_this.setState({newmessages:_this.state.newmessages+1});}};_this.handleUsername=function(e){return _this.setState({username:e.target.value});};_this.sendMessage=function(){socket.emit('chat-message',_this.state.message,_this.state.username);_this.setState({message:\"\",sender:_this.state.username});};_this.copyUrl=function(){var text=window.location.href;if(!navigator.clipboard){var textArea=document.createElement(\"textarea\");textArea.value=text;document.body.appendChild(textArea);textArea.focus();textArea.select();try{document.execCommand('copy');message[\"b\" /* default */].success(\"Link copied to clipboard!\");}catch(err){message[\"b\" /* default */].error(\"Failed to copy\");}document.body.removeChild(textArea);return;}navigator.clipboard.writeText(text).then(function(){message[\"b\" /* default */].success(\"Link copied to clipboard!\");},function(){message[\"b\" /* default */].error(\"Failed to copy\");});};_this.connect=function(){return _this.setState({askForUsername:false},function(){return _this.getMedia();});};_this.isChrome=function(){var userAgent=(navigator&&(navigator.userAgent||'')).toLowerCase();var vendor=(navigator&&(navigator.vendor||'')).toLowerCase();var matchChrome=/google inc/.test(vendor)?userAgent.match(/(?:chrome|crios)\\/(\\d+)/):null;// let matchFirefox = userAgent.match(/(?:firefox|fxios)\\/(\\d+)/)\n// return matchChrome !== null || matchFirefox !== null\nreturn matchChrome!==null;};_this.localVideoref=/*#__PURE__*/react_default.a.createRef();_this.videoAvailable=false;_this.audioAvailable=false;_this.state={video:false,audio:false,screen:false,showModal:false,screenAvailable:false,messages:[],message:\"\",newmessages:0,askForUsername:true,username:faker_default.a.internet.userName()};connections={};_this.getPermissions();return _this;}Object(createClass[\"a\" /* default */])(Video,[{key:\"render\",value:function render(){var _this5=this;if(this.isChrome()===false){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{background:\"white\",width:\"30%\",height:\"auto\",padding:\"20px\",minWidth:\"400px\",textAlign:\"center\",margin:\"auto\",marginTop:\"50px\",justifyContent:\"center\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\"Sorry, this works only with Google Chrome\"})});}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:this.state.askForUsername===true?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{background:\"white\",width:\"30%\",height:\"auto\",padding:\"20px\",minWidth:\"400px\",textAlign:\"center\",margin:\"auto\",marginTop:\"50px\",justifyContent:\"center\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{style:{margin:0,fontWeight:\"bold\",paddingRight:\"50px\"},children:\"Set your username\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{placeholder:\"Username\",value:this.state.username,onChange:function onChange(e){return _this5.handleUsername(e);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{variant:\"contained\",color:\"primary\",onClick:this.connect,style:{margin:\"20px\"},children:\"Connect\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{justifyContent:\"center\",textAlign:\"center\",paddingTop:\"40px\",alignItems:'center'},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"video\",{id:\"my-video\",ref:this.localVideoref,autoPlay:true,muted:true,style:{borderStyle:\"solid\",borderColor:\"#bdbdbd\",objectFit:\"fill\",width:\"30%\",height:\"30%\"}})})]}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"btn-down\",style:{backgroundColor:\"whitesmoke\",color:\"whitesmoke\",textAlign:\"center\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(IconButton[\"a\" /* default */],{style:{color:\"#424242\"},onClick:this.handleVideo,children:this.state.video===true?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Videocam_default.a,{}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(VideocamOff_default.a,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(IconButton[\"a\" /* default */],{style:{color:\"#f44336\"},onClick:this.handleEndCall,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CallEnd_default.a,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(IconButton[\"a\" /* default */],{style:{color:\"#424242\"},onClick:this.handleAudio,children:this.state.audio===true?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Mic_default.a,{}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MicOff_default.a,{})}),this.state.screenAvailable===true?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(IconButton[\"a\" /* default */],{style:{color:\"#424242\"},onClick:this.handleScreen,children:this.state.screen===true?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ScreenShare_default.a,{}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(StopScreenShare_default.a,{})}):null,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Badge[\"a\" /* default */],{badgeContent:this.state.newmessages,max:999,color:\"secondary\",onClick:this.openChat,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(IconButton[\"a\" /* default */],{style:{color:\"#424242\"},onClick:this.openChat,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Chat_default.a,{})})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Modal[\"a\" /* default */],{show:this.state.showModal,onHide:this.closeChat,style:{zIndex:\"999999\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Modal[\"a\" /* default */].Header,{closeButton:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Modal[\"a\" /* default */].Title,{children:\"Chat Room\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Modal[\"a\" /* default */].Body,{style:{overflow:\"auto\",overflowY:\"auto\",height:\"400px\",textAlign:\"left\"},children:this.state.messages.length>0?this.state.messages.map(function(item,index){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{textAlign:\"left\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{style:{wordBreak:\"break-all\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:item.sender}),\": \",item.data]})},index);}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"No message yet\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Modal[\"a\" /* default */].Footer,{className:\"div-send-msg\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{placeholder:\"Message\",value:this.state.message,onChange:function onChange(e){return _this5.handleMessage(e);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{variant:\"contained\",color:\"primary\",onClick:this.sendMessage,children:\"Send\"})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{paddingTop:\"20px\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{value:window.location.href,disable:\"true\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{style:{backgroundColor:\"#3f51b5\",color:\"whitesmoke\",marginLeft:\"20px\",marginTop:\"10px\",width:\"120px\",fontSize:\"10px\"},onClick:this.copyUrl,children:\"Copy invite link\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Row[\"a\" /* default */],{id:\"main\",className:\"flex-container\",style:{margin:0,padding:0},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"video\",{id:\"my-video\",ref:this.localVideoref,autoPlay:true,muted:true,style:{borderStyle:\"solid\",borderColor:\"#bdbdbd\",margin:\"10px\",objectFit:\"fill\",width:\"50%\",height:\"50%\"}})})]})]})});}}]);return Video;}(react[\"Component\"]);/* harmony default export */ var pages_screens_Video = (Video_Video);\n// EXTERNAL MODULE: ./node_modules/@material-ui/icons/GitHub.js\nvar GitHub = __webpack_require__(127);\nvar GitHub_default = /*#__PURE__*/__webpack_require__.n(GitHub);\n\n// EXTERNAL MODULE: ./src/components/pages/screens/Home.css\nvar screens_Home = __webpack_require__(1666);\n\n// CONCATENATED MODULE: ./src/components/pages/screens/Home.js\nvar Home_Home=/*#__PURE__*/function(_Component){Object(inherits[\"a\" /* default */])(Home,_Component);var _super=Object(createSuper[\"a\" /* default */])(Home);function Home(props){var _this;Object(classCallCheck[\"a\" /* default */])(this,Home);_this=_super.call(this,props);_this.handleChange=function(e){return _this.setState({url:e.target.value});};_this.join=function(){if(_this.state.url!==\"\"){var url=_this.state.url.split(\"/\");window.location.href=\"/\".concat(url[url.length-1]);}else{// eslint-disable-next-line no-redeclare\nvar url=Math.random().toString(36).substring(2,7);window.location.href=\"/\".concat(url);}};_this.state={url:''};return _this;}Object(createClass[\"a\" /* default */])(Home,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"container2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{display:' none',fontSize:\"14px\",background:\"white\",width:\"10%\",textAlign:\"center\",margin:\"auto\",marginBottom:\"10px\"},children:[\"Source code:\",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(IconButton[\"a\" /* default */],{style:{color:\"black\"},onClick:function onClick(){return window.location.href=\"https://github.com/0x5eba/Video-Meeting\";},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GitHub_default.a,{})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{style:{fontSize:\"45px\"},children:\"Video Meeting\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{style:{fontWeight:\"200\"},children:\"Video conference website that lets you stay in touch with all your friends.\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{background:\"white\",width:\"30%\",height:\"auto\",padding:\"20px\",minWidth:\"400px\",textAlign:\"center\",margin:\"auto\",marginTop:\"100px\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{style:{margin:0,fontWeight:\"bold\",paddingRight:\"50px\"},children:\"Start or join a meeting\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{placeholder:\"URL\",onChange:function onChange(e){return _this2.handleChange(e);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{variant:\"contained\",color:\"primary\",onClick:this.join,style:{margin:\"20px\"},children:\"Go\"})]})]});}}]);return Home;}(react[\"Component\"]);/* harmony default export */ var pages_screens_Home = (Home_Home);\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(128);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(14);\n\n// CONCATENATED MODULE: ./src/App.js\nvar App_App=/*#__PURE__*/function(_Component){Object(inherits[\"a\" /* default */])(App,_Component);var _super=Object(createSuper[\"a\" /* default */])(App);function App(){Object(classCallCheck[\"a\" /* default */])(this,App);return _super.apply(this,arguments);}Object(createClass[\"a\" /* default */])(App,[{key:\"render\",value:function render(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"c\" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/\",exact:true,component:pages_screens_Home}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/:url\",component:pages_screens_Video})]})})})});}}]);return App;}(react[\"Component\"]);/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/serviceWorker.js\n// This optional code is used to register a service worker.\n// register() is not called by default.\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\nvar isLocalhost=Boolean(window.location.hostname==='localhost'||// [::1] is the IPv6 localhost address.\nwindow.location.hostname==='[::1]'||// 127.0.0.0/8 are considered localhost for IPv4.\nwindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function register(config){if( true&&'serviceWorker'in navigator){// The URL constructor is available in all browsers that support SW.\nvar publicUrl=new URL(\"/prueba\",window.location.href);if(publicUrl.origin!==window.location.origin){// Our service worker won't work if PUBLIC_URL is on a different origin\n// from what our page is served on. This might happen if a CDN is used to\n// serve assets; see https://github.com/facebook/create-react-app/issues/2374\nreturn;}window.addEventListener('load',function(){var swUrl=\"\".concat(\"/prueba\",\"/service-worker.js\");if(isLocalhost){// This is running on localhost. Let's check if a service worker still exists or not.\ncheckValidServiceWorker(swUrl,config);// Add some additional logging to localhost, pointing developers to the\n// service worker/PWA documentation.\nnavigator.serviceWorker.ready.then(function(){console.log('This web app is being served cache-first by a service '+'worker. To learn more, visit https://bit.ly/CRA-PWA');});}else{// Is not localhost. Just register service worker\nregisterValidSW(swUrl,config);}});}}function registerValidSW(swUrl,config){navigator.serviceWorker.register(swUrl).then(function(registration){registration.onupdatefound=function(){var installingWorker=registration.installing;if(installingWorker==null){return;}installingWorker.onstatechange=function(){if(installingWorker.state==='installed'){if(navigator.serviceWorker.controller){// At this point, the updated precached content has been fetched,\n// but the previous service worker will still serve the older\n// content until all client tabs are closed.\nconsole.log('New content is available and will be used when all '+'tabs for this page are closed. See https://bit.ly/CRA-PWA.');// Execute callback\nif(config&&config.onUpdate){config.onUpdate(registration);}}else{// At this point, everything has been precached.\n// It's the perfect time to display a\n// \"Content is cached for offline use.\" message.\nconsole.log('Content is cached for offline use.');// Execute callback\nif(config&&config.onSuccess){config.onSuccess(registration);}}}};};}).catch(function(error){console.error('Error during service worker registration:',error);});}function checkValidServiceWorker(swUrl,config){// Check if the service worker can be found. If it can't reload the page.\nfetch(swUrl,{headers:{'Service-Worker':'script'}}).then(function(response){// Ensure service worker exists, and that we really are getting a JS file.\nvar contentType=response.headers.get('content-type');if(response.status===404||contentType!=null&&contentType.indexOf('javascript')===-1){// No service worker found. Probably a different app. Reload the page.\nnavigator.serviceWorker.ready.then(function(registration){registration.unregister().then(function(){window.location.reload();});});}else{// Service worker found. Proceed as normal.\nregisterValidSW(swUrl,config);}}).catch(function(){console.log('No internet connection found. App is running in offline mode.');});}function unregister(){if('serviceWorker'in navigator){navigator.serviceWorker.ready.then(function(registration){registration.unregister();}).catch(function(error){console.error(error.message);});}}\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{}),document.getElementById('root'));// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nunregister();\n\n/***/ })\n\n},[[1671,1,2]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\antho\\Desktop\\codigo reciclable\\prueba\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\antho\\Desktop\\codigo reciclable\\prueba\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\antho\\Desktop\\codigo reciclable\\prueba\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\antho\\Desktop\\codigo reciclable\\prueba\\src\\components\\pages\\screens\\Video.css","C:\\Users\\antho\\Desktop\\codigo reciclable\\prueba\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\antho\\Desktop\\codigo reciclable\\prueba\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\antho\\Desktop\\codigo reciclable\\prueba\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\antho\\Desktop\\codigo reciclable\\prueba\\src\\components\\pages\\screens\\Home.css","C:/Users/antho/Desktop/codigo reciclable/prueba/src/components/pages/screens/Video.js","C:/Users/antho/Desktop/codigo reciclable/prueba/src/components/pages/screens/Home.js","C:/Users/antho/Desktop/codigo reciclable/prueba/src/App.js","C:/Users/antho/Desktop/codigo reciclable/prueba/src/serviceWorker.js","C:/Users/antho/Desktop/codigo reciclable/prueba/src/index.js"],"names":["server_url","process","connections","peerConnectionConfig","socket","socketId","elms","Video","props","getPermissions","navigator","mediaDevices","getUserMedia","video","then","videoAvailable","catch","audio","audioAvailable","getDisplayMedia","setState","screenAvailable","stream","window","localStream","localVideoref","current","srcObject","e","console","log","getMedia","connectToSocketServer","state","getUserMediaSuccess","tracks","getTracks","forEach","track","stop","id","addStream","createOffer","description","setLocalDescription","emit","JSON","stringify","localDescription","onended","blackSilence","MediaStream","black","silence","getDislayMedia","screen","getDislayMediaSuccess","gotMessageFromServer","fromId","message","signal","parse","sdp","setRemoteDescription","RTCSessionDescription","type","createAnswer","ice","addIceCandidate","RTCIceCandidate","changeCssVideos","main","widthMain","offsetWidth","minWidth","minHeight","height","String","width","videos","querySelectorAll","a","length","style","setProperty","io","connect","secure","on","location","href","addMessage","document","querySelector","parentNode","removeChild","getElementById","clients","socketListId","RTCPeerConnection","onicecandidate","event","candidate","onaddstream","searchVidep","cssMesure","createElement","css","maxHeight","margin","borderStyle","borderColor","objectFit","i","setAttribute","autoplay","playsinline","appendChild","undefined","id2","ctx","AudioContext","oscillator","createOscillator","dst","createMediaStreamDestination","start","resume","Object","assign","getAudioTracks","enabled","canvas","getContext","fillRect","captureStream","getVideoTracks","handleVideo","handleAudio","handleScreen","handleEndCall","openChat","showModal","newmessages","closeChat","handleMessage","target","value","data","sender","socketIdSender","prevState","messages","handleUsername","username","sendMessage","copyUrl","text","clipboard","textArea","body","focus","select","execCommand","success","err","error","writeText","askForUsername","isChrome","userAgent","toLowerCase","vendor","matchChrome","test","match","React","createRef","faker","internet","userName","background","padding","textAlign","marginTop","justifyContent","fontWeight","paddingRight","paddingTop","alignItems","backgroundColor","color","zIndex","overflow","overflowY","map","item","index","wordBreak","marginLeft","fontSize","Component","Home","handleChange","url","join","split","Math","random","toString","substring","display","marginBottom","App","isLocalhost","Boolean","hostname","register","config","publicUrl","URL","origin","addEventListener","swUrl","checkValidServiceWorker","serviceWorker","ready","registerValidSW","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","fetch","headers","response","contentType","get","status","indexOf","unregister","reload","ReactDOM","render"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import React, { Component } from 'react'\r\nimport io from 'socket.io-client'\r\nimport faker from \"faker\"\r\n\r\nimport {IconButton, Badge, Input, Button} from '@material-ui/core'\r\nimport VideocamIcon from '@material-ui/icons/Videocam'\r\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff'\r\nimport MicIcon from '@material-ui/icons/Mic'\r\nimport MicOffIcon from '@material-ui/icons/MicOff'\r\nimport ScreenShareIcon from '@material-ui/icons/ScreenShare'\r\nimport StopScreenShareIcon from '@material-ui/icons/StopScreenShare'\r\nimport CallEndIcon from '@material-ui/icons/CallEnd'\r\nimport ChatIcon from '@material-ui/icons/Chat'\r\n\r\nimport { message } from 'antd'\r\nimport 'antd/dist/antd.css'\r\n\r\nimport { Row } from 'reactstrap'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport \"./Video.css\"\r\n\r\nconst server_url = process.env.NODE_ENV === 'production' ? 'https://video.sebastienbiollo.com' : \"http://localhost:4001\"\r\n\r\nvar connections = {}\r\nconst peerConnectionConfig = {\r\n\t'iceServers': [\r\n\t\t// { 'urls': 'stun:stun.services.mozilla.com' },\r\n\t\t{ 'urls': 'stun:stun.l.google.com:19302' },\r\n\t]\r\n}\r\nvar socket = null\r\nvar socketId = null\r\nvar elms = 0\r\n\r\nclass Video extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.localVideoref = React.createRef()\r\n\r\n\t\tthis.videoAvailable = false\r\n\t\tthis.audioAvailable = false\r\n\r\n\t\tthis.state = {\r\n\t\t\tvideo: false,\r\n\t\t\taudio: false,\r\n\t\t\tscreen: false,\r\n\t\t\tshowModal: false,\r\n\t\t\tscreenAvailable: false,\r\n\t\t\tmessages: [],\r\n\t\t\tmessage: \"\",\r\n\t\t\tnewmessages: 0,\r\n\t\t\taskForUsername: true,\r\n\t\t\tusername: faker.internet.userName(),\r\n\t\t}\r\n\t\tconnections = {}\r\n\r\n\t\tthis.getPermissions()\r\n\t}\r\n\r\n\tgetPermissions = async () => {\r\n\t\ttry{\r\n\t\t\tawait navigator.mediaDevices.getUserMedia({ video: true })\r\n\t\t\t\t.then(() => this.videoAvailable = true)\r\n\t\t\t\t.catch(() => this.videoAvailable = false)\r\n\r\n\t\t\tawait navigator.mediaDevices.getUserMedia({ audio: true })\r\n\t\t\t\t.then(() => this.audioAvailable = true)\r\n\t\t\t\t.catch(() => this.audioAvailable = false)\r\n\r\n\t\t\tif (navigator.mediaDevices.getDisplayMedia) {\r\n\t\t\t\tthis.setState({ screenAvailable: true })\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ screenAvailable: false })\r\n\t\t\t}\r\n\r\n\t\t\tif (this.videoAvailable || this.audioAvailable) {\r\n\t\t\t\tnavigator.mediaDevices.getUserMedia({ video: this.videoAvailable, audio: this.audioAvailable })\r\n\t\t\t\t\t.then((stream) => {\r\n\t\t\t\t\t\twindow.localStream = stream\r\n\t\t\t\t\t\tthis.localVideoref.current.srcObject = stream\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((stream) => {})\r\n\t\t\t\t\t.catch((e) => console.log(e))\r\n\t\t\t}\r\n\t\t} catch(e) { console.log(e) }\r\n\t}\r\n\r\n\tgetMedia = () => {\r\n\t\tthis.setState({\r\n\t\t\tvideo: this.videoAvailable,\r\n\t\t\taudio: this.audioAvailable\r\n\t\t}, () => {\r\n\t\t\tthis.getUserMedia()\r\n\t\t\tthis.connectToSocketServer()\r\n\t\t})\r\n\t}\r\n\r\n\tgetUserMedia = () => {\r\n\t\tif ((this.state.video && this.videoAvailable) || (this.state.audio && this.audioAvailable)) {\r\n\t\t\tnavigator.mediaDevices.getUserMedia({ video: this.state.video, audio: this.state.audio })\r\n\t\t\t\t.then(this.getUserMediaSuccess)\r\n\t\t\t\t.then((stream) => {})\r\n\t\t\t\t.catch((e) => console.log(e))\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\t\ttracks.forEach(track => track.stop())\r\n\t\t\t} catch (e) {}\r\n\t\t}\r\n\t}\r\n\r\n\tgetUserMediaSuccess = (stream) => {\r\n\t\ttry {\r\n\t\t\twindow.localStream.getTracks().forEach(track => track.stop())\r\n\t\t} catch(e) { console.log(e) }\r\n\r\n\t\twindow.localStream = stream\r\n\t\tthis.localVideoref.current.srcObject = stream\r\n\r\n\t\tfor (let id in connections) {\r\n\t\t\tif (id === socketId) continue\r\n\r\n\t\t\tconnections[id].addStream(window.localStream)\r\n\r\n\t\t\t// eslint-disable-next-line no-loop-func\r\n\t\t\tconnections[id].createOffer().then((description) => {\r\n\t\t\t\tconnections[id].setLocalDescription(description)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tsocket.emit('signal', id, JSON.stringify({ 'sdp': connections[id].localDescription }))\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tstream.getTracks().forEach(track => track.onended = () => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tvideo: false,\r\n\t\t\t\taudio: false,\r\n\t\t\t}, () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\t\t\ttracks.forEach(track => track.stop())\r\n\t\t\t\t} catch(e) { console.log(e) }\r\n\r\n\t\t\t\tlet blackSilence = (...args) => new MediaStream([this.black(...args), this.silence()])\r\n\t\t\t\twindow.localStream = blackSilence()\r\n\t\t\t\tthis.localVideoref.current.srcObject = window.localStream\r\n\r\n\t\t\t\tfor (let id in connections) {\r\n\t\t\t\t\tconnections[id].addStream(window.localStream)\r\n\r\n\t\t\t\t\t// eslint-disable-next-line no-loop-func\r\n\t\t\t\t\tconnections[id].createOffer().then((description) => {\r\n\t\t\t\t\t\tconnections[id].setLocalDescription(description)\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tsocket.emit('signal', id, JSON.stringify({ 'sdp': connections[id].localDescription }))\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tgetDislayMedia = () => {\r\n\t\tif (this.state.screen) {\r\n\t\t\tif (navigator.mediaDevices.getDisplayMedia) {\r\n\t\t\t\tnavigator.mediaDevices.getDisplayMedia({ video: true, audio: true })\r\n\t\t\t\t\t.then(this.getDislayMediaSuccess)\r\n\t\t\t\t\t.then((stream) => {})\r\n\t\t\t\t\t.catch((e) => console.log(e))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetDislayMediaSuccess = (stream) => {\r\n\t\ttry {\r\n\t\t\twindow.localStream.getTracks().forEach(track => track.stop())\r\n\t\t} catch(e) { console.log(e) }\r\n\r\n\t\twindow.localStream = stream\r\n\t\tthis.localVideoref.current.srcObject = stream\r\n\r\n\t\tfor (let id in connections) {\r\n\t\t\tif (id === socketId) continue\r\n\r\n\t\t\tconnections[id].addStream(window.localStream)\r\n\r\n\t\t\t// eslint-disable-next-line no-loop-func\r\n\t\t\tconnections[id].createOffer().then((description) => {\r\n\t\t\t\tconnections[id].setLocalDescription(description)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tsocket.emit('signal', id, JSON.stringify({ 'sdp': connections[id].localDescription }))\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tstream.getTracks().forEach(track => track.onended = () => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tscreen: false,\r\n\t\t\t}, () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\t\t\ttracks.forEach(track => track.stop())\r\n\t\t\t\t} catch(e) { console.log(e) }\r\n\r\n\t\t\t\tlet blackSilence = (...args) => new MediaStream([this.black(...args), this.silence()])\r\n\t\t\t\twindow.localStream = blackSilence()\r\n\t\t\t\tthis.localVideoref.current.srcObject = window.localStream\r\n\r\n\t\t\t\tthis.getUserMedia()\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tgotMessageFromServer = (fromId, message) => {\r\n\t\tvar signal = JSON.parse(message)\r\n\r\n\t\tif (fromId !== socketId) {\r\n\t\t\tif (signal.sdp) {\r\n\t\t\t\tconnections[fromId].setRemoteDescription(new RTCSessionDescription(signal.sdp)).then(() => {\r\n\t\t\t\t\tif (signal.sdp.type === 'offer') {\r\n\t\t\t\t\t\tconnections[fromId].createAnswer().then((description) => {\r\n\t\t\t\t\t\t\tconnections[fromId].setLocalDescription(description).then(() => {\r\n\t\t\t\t\t\t\t\tsocket.emit('signal', fromId, JSON.stringify({ 'sdp': connections[fromId].localDescription }))\r\n\t\t\t\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t}\r\n\r\n\t\t\tif (signal.ice) {\r\n\t\t\t\tconnections[fromId].addIceCandidate(new RTCIceCandidate(signal.ice)).catch(e => console.log(e))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tchangeCssVideos = (main) => {\r\n\t\tlet widthMain = main.offsetWidth\r\n\t\tlet minWidth = \"30%\"\r\n\t\tif ((widthMain * 30 / 100) < 300) {\r\n\t\t\tminWidth = \"300px\"\r\n\t\t}\r\n\t\tlet minHeight = \"40%\"\r\n\r\n\t\tlet height = String(100 / elms) + \"%\"\r\n\t\tlet width = \"\"\r\n\t\tif(elms === 0 || elms === 1) {\r\n\t\t\twidth = \"100%\"\r\n\t\t\theight = \"100%\"\r\n\t\t} else if (elms === 2) {\r\n\t\t\twidth = \"45%\"\r\n\t\t\theight = \"100%\"\r\n\t\t} else if (elms === 3 || elms === 4) {\r\n\t\t\twidth = \"35%\"\r\n\t\t\theight = \"50%\"\r\n\t\t} else {\r\n\t\t\twidth = String(100 / elms) + \"%\"\r\n\t\t}\r\n\r\n\t\tlet videos = main.querySelectorAll(\"video\")\r\n\t\tfor (let a = 0; a < videos.length; ++a) {\r\n\t\t\tvideos[a].style.minWidth = minWidth\r\n\t\t\tvideos[a].style.minHeight = minHeight\r\n\t\t\tvideos[a].style.setProperty(\"width\", width)\r\n\t\t\tvideos[a].style.setProperty(\"height\", height)\r\n\t\t}\r\n\r\n\t\treturn {minWidth, minHeight, width, height}\r\n\t}\r\n\r\n\tconnectToSocketServer = () => {\r\n\t\tsocket = io.connect(server_url, { secure: true })\r\n\r\n\t\tsocket.on('signal', this.gotMessageFromServer)\r\n\r\n\t\tsocket.on('connect', () => {\r\n\t\t\tsocket.emit('join-call', window.location.href)\r\n\t\t\tsocketId = socket.id\r\n\r\n\t\t\tsocket.on('chat-message', this.addMessage)\r\n\r\n\t\t\tsocket.on('user-left', (id) => {\r\n\t\t\t\tlet video = document.querySelector(`[data-socket=\"${id}\"]`)\r\n\t\t\t\tif (video !== null) {\r\n\t\t\t\t\telms--\r\n\t\t\t\t\tvideo.parentNode.removeChild(video)\r\n\r\n\t\t\t\t\tlet main = document.getElementById('main')\r\n\t\t\t\t\tthis.changeCssVideos(main)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tsocket.on('user-joined', (id, clients) => {\r\n\t\t\t\tclients.forEach((socketListId) => {\r\n\t\t\t\t\tconnections[socketListId] = new RTCPeerConnection(peerConnectionConfig)\r\n\t\t\t\t\t// Wait for their ice candidate       \r\n\t\t\t\t\tconnections[socketListId].onicecandidate = function (event) {\r\n\t\t\t\t\t\tif (event.candidate != null) {\r\n\t\t\t\t\t\t\tsocket.emit('signal', socketListId, JSON.stringify({ 'ice': event.candidate }))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Wait for their video stream\r\n\t\t\t\t\tconnections[socketListId].onaddstream = (event) => {\r\n\t\t\t\t\t\t// TODO mute button, full screen button\r\n\t\t\t\t\t\tvar searchVidep = document.querySelector(`[data-socket=\"${socketListId}\"]`)\r\n\t\t\t\t\t\tif (searchVidep !== null) { // if i don't do this check it make an empyt square\r\n\t\t\t\t\t\t\tsearchVidep.srcObject = event.stream\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telms = clients.length\r\n\t\t\t\t\t\t\tlet main = document.getElementById('main')\r\n\t\t\t\t\t\t\tlet cssMesure = this.changeCssVideos(main)\r\n\r\n\t\t\t\t\t\t\tlet video = document.createElement('video')\r\n\r\n\t\t\t\t\t\t\tlet css = {minWidth: cssMesure.minWidth, minHeight: cssMesure.minHeight, maxHeight: \"100%\", margin: \"10px\",\r\n\t\t\t\t\t\t\t\tborderStyle: \"solid\", borderColor: \"#bdbdbd\", objectFit: \"fill\"}\r\n\t\t\t\t\t\t\tfor(let i in css) video.style[i] = css[i]\r\n\r\n\t\t\t\t\t\t\tvideo.style.setProperty(\"width\", cssMesure.width)\r\n\t\t\t\t\t\t\tvideo.style.setProperty(\"height\", cssMesure.height)\r\n\t\t\t\t\t\t\tvideo.setAttribute('data-socket', socketListId)\r\n\t\t\t\t\t\t\tvideo.srcObject = event.stream\r\n\t\t\t\t\t\t\tvideo.autoplay = true\r\n\t\t\t\t\t\t\tvideo.playsinline = true\r\n\r\n\t\t\t\t\t\t\tmain.appendChild(video)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Add the local video stream\r\n\t\t\t\t\tif (window.localStream !== undefined && window.localStream !== null) {\r\n\t\t\t\t\t\tconnections[socketListId].addStream(window.localStream)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet blackSilence = (...args) => new MediaStream([this.black(...args), this.silence()])\r\n\t\t\t\t\t\twindow.localStream = blackSilence()\r\n\t\t\t\t\t\tconnections[socketListId].addStream(window.localStream)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (id === socketId) {\r\n\t\t\t\t\tfor (let id2 in connections) {\r\n\t\t\t\t\t\tif (id2 === socketId) continue\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tconnections[id2].addStream(window.localStream)\r\n\t\t\t\t\t\t} catch(e) {}\r\n\t\t\t\r\n\t\t\t\t\t\t// eslint-disable-next-line no-loop-func\r\n\t\t\t\t\t\tconnections[id2].createOffer().then((description) => {\r\n\t\t\t\t\t\t\tconnections[id2].setLocalDescription(description)\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tsocket.emit('signal', id2, JSON.stringify({ 'sdp': connections[id2].localDescription }))\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tsilence = () => {\r\n\t\tlet ctx = new AudioContext()\r\n\t\tlet oscillator = ctx.createOscillator()\r\n\t\tlet dst = oscillator.connect(ctx.createMediaStreamDestination())\r\n\t\toscillator.start()\r\n\t\tctx.resume()\r\n\t\treturn Object.assign(dst.stream.getAudioTracks()[0], { enabled: false })\r\n\t}\r\n\tblack = ({ width = 640, height = 480 } = {}) => {\r\n\t\tlet canvas = Object.assign(document.createElement(\"canvas\"), { width, height })\r\n\t\tcanvas.getContext('2d').fillRect(0, 0, width, height)\r\n\t\tlet stream = canvas.captureStream()\r\n\t\treturn Object.assign(stream.getVideoTracks()[0], { enabled: false })\r\n\t}\r\n\r\n\thandleVideo = () => this.setState({ video: !this.state.video }, () => this.getUserMedia())\r\n\thandleAudio = () => this.setState({ audio: !this.state.audio }, () => this.getUserMedia())\r\n\thandleScreen = () => this.setState({ screen: !this.state.screen }, () => this.getDislayMedia())\r\n\r\n\thandleEndCall = () => {\r\n\t\ttry {\r\n\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\ttracks.forEach(track => track.stop())\r\n\t\t} catch (e) {}\r\n\t\twindow.location.href = \"/\"\r\n\t}\r\n\r\n\topenChat = () => this.setState({ showModal: true, newmessages: 0 })\r\n\tcloseChat = () => this.setState({ showModal: false })\r\n\thandleMessage = (e) => this.setState({ message: e.target.value })\r\n\r\n\taddMessage = (data, sender, socketIdSender) => {\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tmessages: [...prevState.messages, { \"sender\": sender, \"data\": data }],\r\n\t\t}))\r\n\t\tif (socketIdSender !== socketId) {\r\n\t\t\tthis.setState({ newmessages: this.state.newmessages + 1 })\r\n\t\t}\r\n\t}\r\n\r\n\thandleUsername = (e) => this.setState({ username: e.target.value })\r\n\r\n\tsendMessage = () => {\r\n\t\tsocket.emit('chat-message', this.state.message, this.state.username)\r\n\t\tthis.setState({ message: \"\", sender: this.state.username })\r\n\t}\r\n\r\n\tcopyUrl = () => {\r\n\t\tlet text = window.location.href\r\n\t\tif (!navigator.clipboard) {\r\n\t\t\tlet textArea = document.createElement(\"textarea\")\r\n\t\t\ttextArea.value = text\r\n\t\t\tdocument.body.appendChild(textArea)\r\n\t\t\ttextArea.focus()\r\n\t\t\ttextArea.select()\r\n\t\t\ttry {\r\n\t\t\t\tdocument.execCommand('copy')\r\n\t\t\t\tmessage.success(\"Link copied to clipboard!\")\r\n\t\t\t} catch (err) {\r\n\t\t\t\tmessage.error(\"Failed to copy\")\r\n\t\t\t}\r\n\t\t\tdocument.body.removeChild(textArea)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tnavigator.clipboard.writeText(text).then(function () {\r\n\t\t\tmessage.success(\"Link copied to clipboard!\")\r\n\t\t}, () => {\r\n\t\t\tmessage.error(\"Failed to copy\")\r\n\t\t})\r\n\t}\r\n\r\n\tconnect = () => this.setState({ askForUsername: false }, () => this.getMedia())\r\n\r\n\tisChrome = function () {\r\n\t\tlet userAgent = (navigator && (navigator.userAgent || '')).toLowerCase()\r\n\t\tlet vendor = (navigator && (navigator.vendor || '')).toLowerCase()\r\n\t\tlet matchChrome = /google inc/.test(vendor) ? userAgent.match(/(?:chrome|crios)\\/(\\d+)/) : null\r\n\t\t// let matchFirefox = userAgent.match(/(?:firefox|fxios)\\/(\\d+)/)\r\n\t\t// return matchChrome !== null || matchFirefox !== null\r\n\t\treturn matchChrome !== null\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(this.isChrome() === false){\r\n\t\t\treturn (\r\n\t\t\t\t<div style={{background: \"white\", width: \"30%\", height: \"auto\", padding: \"20px\", minWidth: \"400px\",\r\n\t\t\t\t\t\ttextAlign: \"center\", margin: \"auto\", marginTop: \"50px\", justifyContent: \"center\"}}>\r\n\t\t\t\t\t<h1>Sorry, this works only with Google Chrome</h1>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{this.state.askForUsername === true ?\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div style={{background: \"white\", width: \"30%\", height: \"auto\", padding: \"20px\", minWidth: \"400px\",\r\n\t\t\t\t\t\t\t\ttextAlign: \"center\", margin: \"auto\", marginTop: \"50px\", justifyContent: \"center\"}}>\r\n\t\t\t\t\t\t\t<p style={{ margin: 0, fontWeight: \"bold\", paddingRight: \"50px\" }}>Set your username</p>\r\n\t\t\t\t\t\t\t<Input placeholder=\"Username\" value={this.state.username} onChange={e => this.handleUsername(e)} />\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={this.connect} style={{ margin: \"20px\" }}>Connect</Button>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div style={{ justifyContent: \"center\", textAlign: \"center\", paddingTop: \"40px\", alignItems: 'center'}}>\r\n\t\t\t\t\t\t\t<video id=\"my-video\" ref={this.localVideoref} autoPlay muted style={{\r\n\t\t\t\t\t\t\t\tborderStyle: \"solid\",borderColor: \"#bdbdbd\",objectFit: \"fill\",width: \"30%\",height: \"30%\"}}></video>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"btn-down\" style={{ backgroundColor: \"whitesmoke\", color: \"whitesmoke\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t\t<IconButton style={{ color: \"#424242\" }} onClick={this.handleVideo}>\r\n\t\t\t\t\t\t\t\t{(this.state.video === true) ? <VideocamIcon /> : <VideocamOffIcon />}\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t<IconButton style={{ color: \"#f44336\" }} onClick={this.handleEndCall}>\r\n\t\t\t\t\t\t\t\t<CallEndIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t<IconButton style={{ color: \"#424242\" }} onClick={this.handleAudio}>\r\n\t\t\t\t\t\t\t\t{this.state.audio === true ? <MicIcon /> : <MicOffIcon />}\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t{this.state.screenAvailable === true ?\r\n\t\t\t\t\t\t\t\t<IconButton style={{ color: \"#424242\" }} onClick={this.handleScreen}>\r\n\t\t\t\t\t\t\t\t\t{this.state.screen === true ? <ScreenShareIcon /> : <StopScreenShareIcon />}\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t: null}\r\n\r\n\t\t\t\t\t\t\t<Badge badgeContent={this.state.newmessages} max={999} color=\"secondary\" onClick={this.openChat}>\r\n\t\t\t\t\t\t\t\t<IconButton style={{ color: \"#424242\" }} onClick={this.openChat}>\r\n\t\t\t\t\t\t\t\t\t<ChatIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<Modal show={this.state.showModal} onHide={this.closeChat} style={{ zIndex: \"999999\" }}>\r\n\t\t\t\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t\t\t\t<Modal.Title>Chat Room</Modal.Title>\r\n\t\t\t\t\t\t\t</Modal.Header>\r\n\t\t\t\t\t\t\t<Modal.Body style={{ overflow: \"auto\", overflowY: \"auto\", height: \"400px\", textAlign: \"left\" }} >\r\n\t\t\t\t\t\t\t\t{this.state.messages.length > 0 ? this.state.messages.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t<div key={index} style={{textAlign: \"left\"}}>\r\n\t\t\t\t\t\t\t\t\t\t<p style={{ wordBreak: \"break-all\" }}><b>{item.sender}</b>: {item.data}</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)) : <p>No message yet</p>}\r\n\t\t\t\t\t\t\t</Modal.Body>\r\n\t\t\t\t\t\t\t<Modal.Footer className=\"div-send-msg\">\r\n\t\t\t\t\t\t\t\t<Input placeholder=\"Message\" value={this.state.message} onChange={e => this.handleMessage(e)} />\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={this.sendMessage}>Send</Button>\r\n\t\t\t\t\t\t\t</Modal.Footer>\r\n\t\t\t\t\t\t</Modal>\r\n\r\n\t\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t\t<div style={{ paddingTop: \"20px\" }}>\r\n\t\t\t\t\t\t\t\t<Input value={window.location.href} disable=\"true\"></Input>\r\n\t\t\t\t\t\t\t\t<Button style={{backgroundColor: \"#3f51b5\",color: \"whitesmoke\",marginLeft: \"20px\",\r\n\t\t\t\t\t\t\t\t\tmarginTop: \"10px\",width: \"120px\",fontSize: \"10px\"\r\n\t\t\t\t\t\t\t\t}} onClick={this.copyUrl}>Copy invite link</Button>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<Row id=\"main\" className=\"flex-container\" style={{ margin: 0, padding: 0 }}>\r\n\t\t\t\t\t\t\t\t<video id=\"my-video\" ref={this.localVideoref} autoPlay muted style={{\r\n\t\t\t\t\t\t\t\t\tborderStyle: \"solid\",borderColor: \"#bdbdbd\",margin: \"10px\",objectFit: \"fill\",\r\n\t\t\t\t\t\t\t\t\twidth: \"50%\",height: \"50%\"}}>\r\n\r\n\t\t\t\t\t\t\t\t</video>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Video;","import React, { Component } from 'react';\r\nimport { Input, Button, IconButton } from '@material-ui/core';\r\nimport GitHubIcon from '@material-ui/icons/GitHub';\r\nimport \"./Home.css\"\r\n\r\nclass Home extends Component {\r\n  \tconstructor (props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\turl: ''\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange = (e) => this.setState({ url: e.target.value })\r\n\r\n\tjoin = () => {\r\n\t\tif (this.state.url !== \"\") {\r\n\t\t\tvar url = this.state.url.split(\"/\")\r\n\t\t\twindow.location.href = `/${url[url.length-1]}`\r\n\t\t} else {\r\n\t\t\t// eslint-disable-next-line no-redeclare\r\n\t\t\tvar url = Math.random().toString(36).substring(2, 7)\r\n\t\t\twindow.location.href = `/${url}`\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container2\">\r\n\t\t\t\t<div style={{display:' none', fontSize: \"14px\", background: \"white\", width: \"10%\", textAlign: \"center\", margin: \"auto\", marginBottom: \"10px\"}}>\r\n\t\t\t\t\tSource code: \r\n\t\t\t\t\t<IconButton style={{color: \"black\"}} onClick={() => window.location.href=\"https://github.com/0x5eba/Video-Meeting\"}>\r\n\t\t\t\t\t\t<GitHubIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h1 style={{ fontSize: \"45px\" }}>Video Meeting</h1>\r\n\t\t\t\t\t<p style={{ fontWeight: \"200\" }}>Video conference website that lets you stay in touch with all your friends.</p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tbackground: \"white\", width: \"30%\", height: \"auto\", padding: \"20px\", minWidth: \"400px\",\r\n\t\t\t\t\ttextAlign: \"center\", margin: \"auto\", marginTop: \"100px\"\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<p style={{ margin: 0, fontWeight: \"bold\", paddingRight: \"50px\" }}>Start or join a meeting</p>\r\n\t\t\t\t\t<Input placeholder=\"URL\" onChange={e => this.handleChange(e)} />\r\n\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={this.join} style={{ margin: \"20px\" }}>Go</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Home;","import React, {Component} from 'react'\nimport Video from './components/pages/screens/Video';\nimport Home from './components/pages/screens/Home';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nclass App extends Component {\n    render(){\n        return (\n            <>\n              <div>\n                <Router>\n                  <Switch>\n                    <Route path=\"/\" exact component={Home} />\n                    <Route path=\"/:url\" component={Video} />\n                  </Switch>\n                </Router>\n              </div>\n            </>\n        );\n    }\n}\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === 'localhost' ||\r\n\t// [::1] is the IPv6 localhost address.\r\n\twindow.location.hostname === '[::1]' ||\r\n\t// 127.0.0.0/8 are considered localhost for IPv4.\r\n\twindow.location.hostname.match(\r\n\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n\t)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\r\n\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then(registration => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === 'installed') {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\r\n\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tconsole.error('Error during service worker registration:', error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl, {\r\n\t\theaders: { 'Service-Worker': 'script' },\r\n\t})\r\n\t\t.then(response => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\tif (\r\n\t\t\t\tresponse.status === 404 ||\r\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\r\n\t\t\t) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\r\n\t\t\t\t'No internet connection found. App is running in offline mode.'\r\n\t\t\t);\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.ready\r\n\t\t\t.then(registration => {\r\n\t\t\t\tregistration.unregister();\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.error(error.message);\r\n\t\t\t});\r\n\t}\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"]}}