{"ast":null,"code":"import _toConsumableArray from\"C:/Users/antho/Desktop/codigo reciclable/prueba/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/antho/Desktop/codigo reciclable/prueba/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/antho/Desktop/codigo reciclable/prueba/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/antho/Desktop/codigo reciclable/prueba/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/antho/Desktop/codigo reciclable/prueba/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/antho/Desktop/codigo reciclable/prueba/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/antho/Desktop/codigo reciclable/prueba/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import io from'socket.io-client';import faker from\"faker\";import{IconButton,Badge,Input,Button}from'@material-ui/core';import VideocamIcon from'@material-ui/icons/Videocam';import VideocamOffIcon from'@material-ui/icons/VideocamOff';import MicIcon from'@material-ui/icons/Mic';import MicOffIcon from'@material-ui/icons/MicOff';import ScreenShareIcon from'@material-ui/icons/ScreenShare';import StopScreenShareIcon from'@material-ui/icons/StopScreenShare';import CallEndIcon from'@material-ui/icons/CallEnd';import ChatIcon from'@material-ui/icons/Chat';import{message}from'antd';import'antd/dist/antd.css';import{Row}from'reactstrap';import Modal from'react-bootstrap/Modal';import'bootstrap/dist/css/bootstrap.css';import\"./Video.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var server_url=process.env.NODE_ENV==='production'?'https://video.sebastienbiollo.com':\"http://localhost:4001\";var connections={};var peerConnectionConfig={'iceServers':[// { 'urls': 'stun:stun.services.mozilla.com' },\n{'urls':'stun:stun.l.google.com:19302'}]};var socket=null;var socketId=null;var elms=0;var Video=/*#__PURE__*/function(_Component){_inherits(Video,_Component);var _super=_createSuper(Video);function Video(props){var _this;_classCallCheck(this,Video);_this=_super.call(this,props);_this.getPermissions=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return navigator.mediaDevices.getUserMedia({video:true}).then(function(){return _this.videoAvailable=true;}).catch(function(){return _this.videoAvailable=false;});case 3:_context.next=5;return navigator.mediaDevices.getUserMedia({audio:true}).then(function(){return _this.audioAvailable=true;}).catch(function(){return _this.audioAvailable=false;});case 5:if(navigator.mediaDevices.getDisplayMedia){_this.setState({screenAvailable:true});}else{_this.setState({screenAvailable:false});}if(_this.videoAvailable||_this.audioAvailable){navigator.mediaDevices.getUserMedia({video:_this.videoAvailable,audio:_this.audioAvailable}).then(function(stream){window.localStream=stream;_this.localVideoref.current.srcObject=stream;}).then(function(stream){}).catch(function(e){return console.log(e);});}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));_this.getMedia=function(){_this.setState({video:_this.videoAvailable,audio:_this.audioAvailable},function(){_this.getUserMedia();_this.connectToSocketServer();});};_this.getUserMedia=function(){if(_this.state.video&&_this.videoAvailable||_this.state.audio&&_this.audioAvailable){navigator.mediaDevices.getUserMedia({video:_this.state.video,audio:_this.state.audio}).then(_this.getUserMediaSuccess).then(function(stream){}).catch(function(e){return console.log(e);});}else{try{var tracks=_this.localVideoref.current.srcObject.getTracks();tracks.forEach(function(track){return track.stop();});}catch(e){}}};_this.getUserMediaSuccess=function(stream){try{window.localStream.getTracks().forEach(function(track){return track.stop();});}catch(e){console.log(e);}window.localStream=stream;_this.localVideoref.current.srcObject=stream;var _loop=function _loop(id){if(id===socketId)return\"continue\";connections[id].addStream(window.localStream);// eslint-disable-next-line no-loop-func\nconnections[id].createOffer().then(function(description){connections[id].setLocalDescription(description).then(function(){socket.emit('signal',id,JSON.stringify({'sdp':connections[id].localDescription}));}).catch(function(e){return console.log(e);});});};for(var id in connections){var _ret=_loop(id);if(_ret===\"continue\")continue;}stream.getTracks().forEach(function(track){return track.onended=function(){_this.setState({video:false,audio:false},function(){try{var tracks=_this.localVideoref.current.srcObject.getTracks();tracks.forEach(function(track){return track.stop();});}catch(e){console.log(e);}var blackSilence=function blackSilence(){var _this2;return new MediaStream([(_this2=_this).black.apply(_this2,arguments),_this.silence()]);};window.localStream=blackSilence();_this.localVideoref.current.srcObject=window.localStream;var _loop2=function _loop2(_id){connections[_id].addStream(window.localStream);// eslint-disable-next-line no-loop-func\nconnections[_id].createOffer().then(function(description){connections[_id].setLocalDescription(description).then(function(){socket.emit('signal',_id,JSON.stringify({'sdp':connections[_id].localDescription}));}).catch(function(e){return console.log(e);});});};for(var _id in connections){_loop2(_id);}});};});};_this.getDislayMedia=function(){if(_this.state.screen){if(navigator.mediaDevices.getDisplayMedia){navigator.mediaDevices.getDisplayMedia({video:true,audio:true}).then(_this.getDislayMediaSuccess).then(function(stream){}).catch(function(e){return console.log(e);});}}};_this.getDislayMediaSuccess=function(stream){try{window.localStream.getTracks().forEach(function(track){return track.stop();});}catch(e){console.log(e);}window.localStream=stream;_this.localVideoref.current.srcObject=stream;var _loop3=function _loop3(id){if(id===socketId)return\"continue\";connections[id].addStream(window.localStream);// eslint-disable-next-line no-loop-func\nconnections[id].createOffer().then(function(description){connections[id].setLocalDescription(description).then(function(){socket.emit('signal',id,JSON.stringify({'sdp':connections[id].localDescription}));}).catch(function(e){return console.log(e);});});};for(var id in connections){var _ret2=_loop3(id);if(_ret2===\"continue\")continue;}stream.getTracks().forEach(function(track){return track.onended=function(){_this.setState({screen:false},function(){try{var tracks=_this.localVideoref.current.srcObject.getTracks();tracks.forEach(function(track){return track.stop();});}catch(e){console.log(e);}var blackSilence=function blackSilence(){var _this3;return new MediaStream([(_this3=_this).black.apply(_this3,arguments),_this.silence()]);};window.localStream=blackSilence();_this.localVideoref.current.srcObject=window.localStream;_this.getUserMedia();});};});};_this.gotMessageFromServer=function(fromId,message){var signal=JSON.parse(message);if(fromId!==socketId){if(signal.sdp){connections[fromId].setRemoteDescription(new RTCSessionDescription(signal.sdp)).then(function(){if(signal.sdp.type==='offer'){connections[fromId].createAnswer().then(function(description){connections[fromId].setLocalDescription(description).then(function(){socket.emit('signal',fromId,JSON.stringify({'sdp':connections[fromId].localDescription}));}).catch(function(e){return console.log(e);});}).catch(function(e){return console.log(e);});}}).catch(function(e){return console.log(e);});}if(signal.ice){connections[fromId].addIceCandidate(new RTCIceCandidate(signal.ice)).catch(function(e){return console.log(e);});}}};_this.changeCssVideos=function(main){var widthMain=main.offsetWidth;var minWidth=\"30%\";if(widthMain*30/100<300){minWidth=\"300px\";}var minHeight=\"40%\";var height=String(100/elms)+\"%\";var width=\"\";if(elms===0||elms===1){width=\"100%\";height=\"100%\";}else if(elms===2){width=\"45%\";height=\"100%\";}else if(elms===3||elms===4){width=\"35%\";height=\"50%\";}else{width=String(100/elms)+\"%\";}var videos=main.querySelectorAll(\"video\");for(var a=0;a<videos.length;++a){videos[a].style.minWidth=minWidth;videos[a].style.minHeight=minHeight;videos[a].style.setProperty(\"width\",width);videos[a].style.setProperty(\"height\",height);}return{minWidth:minWidth,minHeight:minHeight,width:width,height:height};};_this.connectToSocketServer=function(){socket=io.connect(server_url,{secure:true});socket.on('signal',_this.gotMessageFromServer);socket.on('connect',function(){socket.emit('join-call',window.location.href);socketId=socket.id;socket.on('chat-message',_this.addMessage);socket.on('user-left',function(id){var video=document.querySelector(\"[data-socket=\\\"\".concat(id,\"\\\"]\"));if(video!==null){elms--;video.parentNode.removeChild(video);var main=document.getElementById('main');_this.changeCssVideos(main);}});socket.on('user-joined',function(id,clients){clients.forEach(function(socketListId){connections[socketListId]=new RTCPeerConnection(peerConnectionConfig);// Wait for their ice candidate       \nconnections[socketListId].onicecandidate=function(event){if(event.candidate!=null){socket.emit('signal',socketListId,JSON.stringify({'ice':event.candidate}));}};// Wait for their video stream\nconnections[socketListId].onaddstream=function(event){// TODO mute button, full screen button\nvar searchVidep=document.querySelector(\"[data-socket=\\\"\".concat(socketListId,\"\\\"]\"));if(searchVidep!==null){// if i don't do this check it make an empyt square\nsearchVidep.srcObject=event.stream;}else{elms=clients.length;var main=document.getElementById('main');var cssMesure=_this.changeCssVideos(main);var video=document.createElement('video');var css={minWidth:cssMesure.minWidth,minHeight:cssMesure.minHeight,maxHeight:\"100%\",margin:\"10px\",borderStyle:\"solid\",borderColor:\"#bdbdbd\",objectFit:\"fill\"};for(var i in css){video.style[i]=css[i];}video.style.setProperty(\"width\",cssMesure.width);video.style.setProperty(\"height\",cssMesure.height);video.setAttribute('data-socket',socketListId);video.srcObject=event.stream;video.autoplay=true;video.playsinline=true;main.appendChild(video);}};// Add the local video stream\nif(window.localStream!==undefined&&window.localStream!==null){connections[socketListId].addStream(window.localStream);}else{var blackSilence=function blackSilence(){var _this4;return new MediaStream([(_this4=_this).black.apply(_this4,arguments),_this.silence()]);};window.localStream=blackSilence();connections[socketListId].addStream(window.localStream);}});if(id===socketId){var _loop4=function _loop4(id2){if(id2===socketId)return\"continue\";try{connections[id2].addStream(window.localStream);}catch(e){}// eslint-disable-next-line no-loop-func\nconnections[id2].createOffer().then(function(description){connections[id2].setLocalDescription(description).then(function(){socket.emit('signal',id2,JSON.stringify({'sdp':connections[id2].localDescription}));}).catch(function(e){return console.log(e);});});};for(var id2 in connections){var _ret3=_loop4(id2);if(_ret3===\"continue\")continue;}}});});};_this.silence=function(){var ctx=new AudioContext();var oscillator=ctx.createOscillator();var dst=oscillator.connect(ctx.createMediaStreamDestination());oscillator.start();ctx.resume();return Object.assign(dst.stream.getAudioTracks()[0],{enabled:false});};_this.black=function(){var _ref2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref2$width=_ref2.width,width=_ref2$width===void 0?640:_ref2$width,_ref2$height=_ref2.height,height=_ref2$height===void 0?480:_ref2$height;var canvas=Object.assign(document.createElement(\"canvas\"),{width:width,height:height});canvas.getContext('2d').fillRect(0,0,width,height);var stream=canvas.captureStream();return Object.assign(stream.getVideoTracks()[0],{enabled:false});};_this.handleVideo=function(){return _this.setState({video:!_this.state.video},function(){return _this.getUserMedia();});};_this.handleAudio=function(){return _this.setState({audio:!_this.state.audio},function(){return _this.getUserMedia();});};_this.handleScreen=function(){return _this.setState({screen:!_this.state.screen},function(){return _this.getDislayMedia();});};_this.handleEndCall=function(){try{var tracks=_this.localVideoref.current.srcObject.getTracks();tracks.forEach(function(track){return track.stop();});}catch(e){}window.location.href=\"/\";};_this.openChat=function(){return _this.setState({showModal:true,newmessages:0});};_this.closeChat=function(){return _this.setState({showModal:false});};_this.handleMessage=function(e){return _this.setState({message:e.target.value});};_this.addMessage=function(data,sender,socketIdSender){_this.setState(function(prevState){return{messages:[].concat(_toConsumableArray(prevState.messages),[{\"sender\":sender,\"data\":data}])};});if(socketIdSender!==socketId){_this.setState({newmessages:_this.state.newmessages+1});}};_this.handleUsername=function(e){return _this.setState({username:e.target.value});};_this.sendMessage=function(){socket.emit('chat-message',_this.state.message,_this.state.username);_this.setState({message:\"\",sender:_this.state.username});};_this.copyUrl=function(){var text=window.location.href;if(!navigator.clipboard){var textArea=document.createElement(\"textarea\");textArea.value=text;document.body.appendChild(textArea);textArea.focus();textArea.select();try{document.execCommand('copy');message.success(\"Link copied to clipboard!\");}catch(err){message.error(\"Failed to copy\");}document.body.removeChild(textArea);return;}navigator.clipboard.writeText(text).then(function(){message.success(\"Link copied to clipboard!\");},function(){message.error(\"Failed to copy\");});};_this.connect=function(){return _this.setState({askForUsername:false},function(){return _this.getMedia();});};_this.isChrome=function(){var userAgent=(navigator&&(navigator.userAgent||'')).toLowerCase();var vendor=(navigator&&(navigator.vendor||'')).toLowerCase();var matchChrome=/google inc/.test(vendor)?userAgent.match(/(?:chrome|crios)\\/(\\d+)/):null;// let matchFirefox = userAgent.match(/(?:firefox|fxios)\\/(\\d+)/)\n// return matchChrome !== null || matchFirefox !== null\nreturn matchChrome!==null;};_this.localVideoref=/*#__PURE__*/React.createRef();_this.videoAvailable=false;_this.audioAvailable=false;_this.state={video:false,audio:false,screen:false,showModal:false,screenAvailable:false,messages:[],message:\"\",newmessages:0,askForUsername:true,username:faker.internet.userName()};connections={};_this.getPermissions();return _this;}_createClass(Video,[{key:\"render\",value:function render(){var _this5=this;if(this.isChrome()===false){return/*#__PURE__*/_jsx(\"div\",{style:{background:\"white\",width:\"30%\",height:\"auto\",padding:\"20px\",minWidth:\"400px\",textAlign:\"center\",margin:\"auto\",marginTop:\"50px\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"h1\",{children:\"Sorry, this works only with Google Chrome\"})});}return/*#__PURE__*/_jsx(\"div\",{children:this.state.askForUsername===true?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",width:\"30%\",height:\"auto\",padding:\"20px\",minWidth:\"400px\",textAlign:\"center\",margin:\"auto\",marginTop:\"50px\",justifyContent:\"center\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontWeight:\"bold\",paddingRight:\"50px\"},children:\"Set your username\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Username\",value:this.state.username,onChange:function onChange(e){return _this5.handleUsername(e);}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:this.connect,style:{margin:\"20px\"},children:\"Connect\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{justifyContent:\"center\",textAlign:\"center\",paddingTop:\"40px\",alignItems:'center'},children:/*#__PURE__*/_jsx(\"video\",{id:\"my-video\",ref:this.localVideoref,autoPlay:true,muted:true,style:{borderStyle:\"solid\",borderColor:\"#bdbdbd\",objectFit:\"fill\",width:\"30%\",height:\"30%\"}})})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn-down\",style:{backgroundColor:\"whitesmoke\",color:\"whitesmoke\",textAlign:\"center\"},children:[/*#__PURE__*/_jsx(IconButton,{style:{color:\"#424242\"},onClick:this.handleVideo,children:this.state.video===true?/*#__PURE__*/_jsx(VideocamIcon,{}):/*#__PURE__*/_jsx(VideocamOffIcon,{})}),/*#__PURE__*/_jsx(IconButton,{style:{color:\"#f44336\"},onClick:this.handleEndCall,children:/*#__PURE__*/_jsx(CallEndIcon,{})}),/*#__PURE__*/_jsx(IconButton,{style:{color:\"#424242\"},onClick:this.handleAudio,children:this.state.audio===true?/*#__PURE__*/_jsx(MicIcon,{}):/*#__PURE__*/_jsx(MicOffIcon,{})}),this.state.screenAvailable===true?/*#__PURE__*/_jsx(IconButton,{style:{color:\"#424242\"},onClick:this.handleScreen,children:this.state.screen===true?/*#__PURE__*/_jsx(ScreenShareIcon,{}):/*#__PURE__*/_jsx(StopScreenShareIcon,{})}):null,/*#__PURE__*/_jsx(Badge,{badgeContent:this.state.newmessages,max:999,color:\"secondary\",onClick:this.openChat,children:/*#__PURE__*/_jsx(IconButton,{style:{color:\"#424242\"},onClick:this.openChat,children:/*#__PURE__*/_jsx(ChatIcon,{})})})]}),/*#__PURE__*/_jsxs(Modal,{show:this.state.showModal,onHide:this.closeChat,style:{zIndex:\"999999\"},children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Chat Room\"})}),/*#__PURE__*/_jsx(Modal.Body,{style:{overflow:\"auto\",overflowY:\"auto\",height:\"400px\",textAlign:\"left\"},children:this.state.messages.length>0?this.state.messages.map(function(item,index){return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"left\"},children:/*#__PURE__*/_jsxs(\"p\",{style:{wordBreak:\"break-all\"},children:[/*#__PURE__*/_jsx(\"b\",{children:item.sender}),\": \",item.data]})},index);}):/*#__PURE__*/_jsx(\"p\",{children:\"No message yet\"})}),/*#__PURE__*/_jsxs(Modal.Footer,{className:\"div-send-msg\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Message\",value:this.state.message,onChange:function onChange(e){return _this5.handleMessage(e);}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:this.sendMessage,children:\"Send\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:\"20px\"},children:[/*#__PURE__*/_jsx(Input,{value:window.location.href,disable:\"true\"}),/*#__PURE__*/_jsx(Button,{style:{backgroundColor:\"#3f51b5\",color:\"whitesmoke\",marginLeft:\"20px\",marginTop:\"10px\",width:\"120px\",fontSize:\"10px\"},onClick:this.copyUrl,children:\"Copy invite link\"})]}),/*#__PURE__*/_jsx(Row,{id:\"main\",className:\"flex-container\",style:{margin:0,padding:0},children:/*#__PURE__*/_jsx(\"video\",{id:\"my-video\",ref:this.localVideoref,autoPlay:true,muted:true,style:{borderStyle:\"solid\",borderColor:\"#bdbdbd\",margin:\"10px\",objectFit:\"fill\",width:\"50%\",height:\"50%\"}})})]})]})});}}]);return Video;}(Component);export default Video;","map":{"version":3,"sources":["C:/Users/antho/Desktop/codigo reciclable/prueba/src/components/pages/screens/Video.js"],"names":["React","Component","io","faker","IconButton","Badge","Input","Button","VideocamIcon","VideocamOffIcon","MicIcon","MicOffIcon","ScreenShareIcon","StopScreenShareIcon","CallEndIcon","ChatIcon","message","Row","Modal","server_url","process","env","NODE_ENV","connections","peerConnectionConfig","socket","socketId","elms","Video","props","getPermissions","navigator","mediaDevices","getUserMedia","video","then","videoAvailable","catch","audio","audioAvailable","getDisplayMedia","setState","screenAvailable","stream","window","localStream","localVideoref","current","srcObject","e","console","log","getMedia","connectToSocketServer","state","getUserMediaSuccess","tracks","getTracks","forEach","track","stop","id","addStream","createOffer","description","setLocalDescription","emit","JSON","stringify","localDescription","onended","blackSilence","MediaStream","black","silence","getDislayMedia","screen","getDislayMediaSuccess","gotMessageFromServer","fromId","signal","parse","sdp","setRemoteDescription","RTCSessionDescription","type","createAnswer","ice","addIceCandidate","RTCIceCandidate","changeCssVideos","main","widthMain","offsetWidth","minWidth","minHeight","height","String","width","videos","querySelectorAll","a","length","style","setProperty","connect","secure","on","location","href","addMessage","document","querySelector","parentNode","removeChild","getElementById","clients","socketListId","RTCPeerConnection","onicecandidate","event","candidate","onaddstream","searchVidep","cssMesure","createElement","css","maxHeight","margin","borderStyle","borderColor","objectFit","i","setAttribute","autoplay","playsinline","appendChild","undefined","id2","ctx","AudioContext","oscillator","createOscillator","dst","createMediaStreamDestination","start","resume","Object","assign","getAudioTracks","enabled","canvas","getContext","fillRect","captureStream","getVideoTracks","handleVideo","handleAudio","handleScreen","handleEndCall","openChat","showModal","newmessages","closeChat","handleMessage","target","value","data","sender","socketIdSender","prevState","messages","handleUsername","username","sendMessage","copyUrl","text","clipboard","textArea","body","focus","select","execCommand","success","err","error","writeText","askForUsername","isChrome","userAgent","toLowerCase","vendor","matchChrome","test","match","createRef","internet","userName","background","padding","textAlign","marginTop","justifyContent","fontWeight","paddingRight","paddingTop","alignItems","backgroundColor","color","zIndex","overflow","overflowY","map","item","index","wordBreak","marginLeft","fontSize"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport io from 'socket.io-client'\r\nimport faker from \"faker\"\r\n\r\nimport {IconButton, Badge, Input, Button} from '@material-ui/core'\r\nimport VideocamIcon from '@material-ui/icons/Videocam'\r\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff'\r\nimport MicIcon from '@material-ui/icons/Mic'\r\nimport MicOffIcon from '@material-ui/icons/MicOff'\r\nimport ScreenShareIcon from '@material-ui/icons/ScreenShare'\r\nimport StopScreenShareIcon from '@material-ui/icons/StopScreenShare'\r\nimport CallEndIcon from '@material-ui/icons/CallEnd'\r\nimport ChatIcon from '@material-ui/icons/Chat'\r\n\r\nimport { message } from 'antd'\r\nimport 'antd/dist/antd.css'\r\n\r\nimport { Row } from 'reactstrap'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport \"./Video.css\"\r\n\r\nconst server_url = process.env.NODE_ENV === 'production' ? 'https://video.sebastienbiollo.com' : \"http://localhost:4001\"\r\n\r\nvar connections = {}\r\nconst peerConnectionConfig = {\r\n\t'iceServers': [\r\n\t\t// { 'urls': 'stun:stun.services.mozilla.com' },\r\n\t\t{ 'urls': 'stun:stun.l.google.com:19302' },\r\n\t]\r\n}\r\nvar socket = null\r\nvar socketId = null\r\nvar elms = 0\r\n\r\nclass Video extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.localVideoref = React.createRef()\r\n\r\n\t\tthis.videoAvailable = false\r\n\t\tthis.audioAvailable = false\r\n\r\n\t\tthis.state = {\r\n\t\t\tvideo: false,\r\n\t\t\taudio: false,\r\n\t\t\tscreen: false,\r\n\t\t\tshowModal: false,\r\n\t\t\tscreenAvailable: false,\r\n\t\t\tmessages: [],\r\n\t\t\tmessage: \"\",\r\n\t\t\tnewmessages: 0,\r\n\t\t\taskForUsername: true,\r\n\t\t\tusername: faker.internet.userName(),\r\n\t\t}\r\n\t\tconnections = {}\r\n\r\n\t\tthis.getPermissions()\r\n\t}\r\n\r\n\tgetPermissions = async () => {\r\n\t\ttry{\r\n\t\t\tawait navigator.mediaDevices.getUserMedia({ video: true })\r\n\t\t\t\t.then(() => this.videoAvailable = true)\r\n\t\t\t\t.catch(() => this.videoAvailable = false)\r\n\r\n\t\t\tawait navigator.mediaDevices.getUserMedia({ audio: true })\r\n\t\t\t\t.then(() => this.audioAvailable = true)\r\n\t\t\t\t.catch(() => this.audioAvailable = false)\r\n\r\n\t\t\tif (navigator.mediaDevices.getDisplayMedia) {\r\n\t\t\t\tthis.setState({ screenAvailable: true })\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ screenAvailable: false })\r\n\t\t\t}\r\n\r\n\t\t\tif (this.videoAvailable || this.audioAvailable) {\r\n\t\t\t\tnavigator.mediaDevices.getUserMedia({ video: this.videoAvailable, audio: this.audioAvailable })\r\n\t\t\t\t\t.then((stream) => {\r\n\t\t\t\t\t\twindow.localStream = stream\r\n\t\t\t\t\t\tthis.localVideoref.current.srcObject = stream\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((stream) => {})\r\n\t\t\t\t\t.catch((e) => console.log(e))\r\n\t\t\t}\r\n\t\t} catch(e) { console.log(e) }\r\n\t}\r\n\r\n\tgetMedia = () => {\r\n\t\tthis.setState({\r\n\t\t\tvideo: this.videoAvailable,\r\n\t\t\taudio: this.audioAvailable\r\n\t\t}, () => {\r\n\t\t\tthis.getUserMedia()\r\n\t\t\tthis.connectToSocketServer()\r\n\t\t})\r\n\t}\r\n\r\n\tgetUserMedia = () => {\r\n\t\tif ((this.state.video && this.videoAvailable) || (this.state.audio && this.audioAvailable)) {\r\n\t\t\tnavigator.mediaDevices.getUserMedia({ video: this.state.video, audio: this.state.audio })\r\n\t\t\t\t.then(this.getUserMediaSuccess)\r\n\t\t\t\t.then((stream) => {})\r\n\t\t\t\t.catch((e) => console.log(e))\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\t\ttracks.forEach(track => track.stop())\r\n\t\t\t} catch (e) {}\r\n\t\t}\r\n\t}\r\n\r\n\tgetUserMediaSuccess = (stream) => {\r\n\t\ttry {\r\n\t\t\twindow.localStream.getTracks().forEach(track => track.stop())\r\n\t\t} catch(e) { console.log(e) }\r\n\r\n\t\twindow.localStream = stream\r\n\t\tthis.localVideoref.current.srcObject = stream\r\n\r\n\t\tfor (let id in connections) {\r\n\t\t\tif (id === socketId) continue\r\n\r\n\t\t\tconnections[id].addStream(window.localStream)\r\n\r\n\t\t\t// eslint-disable-next-line no-loop-func\r\n\t\t\tconnections[id].createOffer().then((description) => {\r\n\t\t\t\tconnections[id].setLocalDescription(description)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tsocket.emit('signal', id, JSON.stringify({ 'sdp': connections[id].localDescription }))\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tstream.getTracks().forEach(track => track.onended = () => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tvideo: false,\r\n\t\t\t\taudio: false,\r\n\t\t\t}, () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\t\t\ttracks.forEach(track => track.stop())\r\n\t\t\t\t} catch(e) { console.log(e) }\r\n\r\n\t\t\t\tlet blackSilence = (...args) => new MediaStream([this.black(...args), this.silence()])\r\n\t\t\t\twindow.localStream = blackSilence()\r\n\t\t\t\tthis.localVideoref.current.srcObject = window.localStream\r\n\r\n\t\t\t\tfor (let id in connections) {\r\n\t\t\t\t\tconnections[id].addStream(window.localStream)\r\n\r\n\t\t\t\t\t// eslint-disable-next-line no-loop-func\r\n\t\t\t\t\tconnections[id].createOffer().then((description) => {\r\n\t\t\t\t\t\tconnections[id].setLocalDescription(description)\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tsocket.emit('signal', id, JSON.stringify({ 'sdp': connections[id].localDescription }))\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tgetDislayMedia = () => {\r\n\t\tif (this.state.screen) {\r\n\t\t\tif (navigator.mediaDevices.getDisplayMedia) {\r\n\t\t\t\tnavigator.mediaDevices.getDisplayMedia({ video: true, audio: true })\r\n\t\t\t\t\t.then(this.getDislayMediaSuccess)\r\n\t\t\t\t\t.then((stream) => {})\r\n\t\t\t\t\t.catch((e) => console.log(e))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetDislayMediaSuccess = (stream) => {\r\n\t\ttry {\r\n\t\t\twindow.localStream.getTracks().forEach(track => track.stop())\r\n\t\t} catch(e) { console.log(e) }\r\n\r\n\t\twindow.localStream = stream\r\n\t\tthis.localVideoref.current.srcObject = stream\r\n\r\n\t\tfor (let id in connections) {\r\n\t\t\tif (id === socketId) continue\r\n\r\n\t\t\tconnections[id].addStream(window.localStream)\r\n\r\n\t\t\t// eslint-disable-next-line no-loop-func\r\n\t\t\tconnections[id].createOffer().then((description) => {\r\n\t\t\t\tconnections[id].setLocalDescription(description)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tsocket.emit('signal', id, JSON.stringify({ 'sdp': connections[id].localDescription }))\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tstream.getTracks().forEach(track => track.onended = () => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tscreen: false,\r\n\t\t\t}, () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\t\t\ttracks.forEach(track => track.stop())\r\n\t\t\t\t} catch(e) { console.log(e) }\r\n\r\n\t\t\t\tlet blackSilence = (...args) => new MediaStream([this.black(...args), this.silence()])\r\n\t\t\t\twindow.localStream = blackSilence()\r\n\t\t\t\tthis.localVideoref.current.srcObject = window.localStream\r\n\r\n\t\t\t\tthis.getUserMedia()\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tgotMessageFromServer = (fromId, message) => {\r\n\t\tvar signal = JSON.parse(message)\r\n\r\n\t\tif (fromId !== socketId) {\r\n\t\t\tif (signal.sdp) {\r\n\t\t\t\tconnections[fromId].setRemoteDescription(new RTCSessionDescription(signal.sdp)).then(() => {\r\n\t\t\t\t\tif (signal.sdp.type === 'offer') {\r\n\t\t\t\t\t\tconnections[fromId].createAnswer().then((description) => {\r\n\t\t\t\t\t\t\tconnections[fromId].setLocalDescription(description).then(() => {\r\n\t\t\t\t\t\t\t\tsocket.emit('signal', fromId, JSON.stringify({ 'sdp': connections[fromId].localDescription }))\r\n\t\t\t\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t}\r\n\r\n\t\t\tif (signal.ice) {\r\n\t\t\t\tconnections[fromId].addIceCandidate(new RTCIceCandidate(signal.ice)).catch(e => console.log(e))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tchangeCssVideos = (main) => {\r\n\t\tlet widthMain = main.offsetWidth\r\n\t\tlet minWidth = \"30%\"\r\n\t\tif ((widthMain * 30 / 100) < 300) {\r\n\t\t\tminWidth = \"300px\"\r\n\t\t}\r\n\t\tlet minHeight = \"40%\"\r\n\r\n\t\tlet height = String(100 / elms) + \"%\"\r\n\t\tlet width = \"\"\r\n\t\tif(elms === 0 || elms === 1) {\r\n\t\t\twidth = \"100%\"\r\n\t\t\theight = \"100%\"\r\n\t\t} else if (elms === 2) {\r\n\t\t\twidth = \"45%\"\r\n\t\t\theight = \"100%\"\r\n\t\t} else if (elms === 3 || elms === 4) {\r\n\t\t\twidth = \"35%\"\r\n\t\t\theight = \"50%\"\r\n\t\t} else {\r\n\t\t\twidth = String(100 / elms) + \"%\"\r\n\t\t}\r\n\r\n\t\tlet videos = main.querySelectorAll(\"video\")\r\n\t\tfor (let a = 0; a < videos.length; ++a) {\r\n\t\t\tvideos[a].style.minWidth = minWidth\r\n\t\t\tvideos[a].style.minHeight = minHeight\r\n\t\t\tvideos[a].style.setProperty(\"width\", width)\r\n\t\t\tvideos[a].style.setProperty(\"height\", height)\r\n\t\t}\r\n\r\n\t\treturn {minWidth, minHeight, width, height}\r\n\t}\r\n\r\n\tconnectToSocketServer = () => {\r\n\t\tsocket = io.connect(server_url, { secure: true })\r\n\r\n\t\tsocket.on('signal', this.gotMessageFromServer)\r\n\r\n\t\tsocket.on('connect', () => {\r\n\t\t\tsocket.emit('join-call', window.location.href)\r\n\t\t\tsocketId = socket.id\r\n\r\n\t\t\tsocket.on('chat-message', this.addMessage)\r\n\r\n\t\t\tsocket.on('user-left', (id) => {\r\n\t\t\t\tlet video = document.querySelector(`[data-socket=\"${id}\"]`)\r\n\t\t\t\tif (video !== null) {\r\n\t\t\t\t\telms--\r\n\t\t\t\t\tvideo.parentNode.removeChild(video)\r\n\r\n\t\t\t\t\tlet main = document.getElementById('main')\r\n\t\t\t\t\tthis.changeCssVideos(main)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tsocket.on('user-joined', (id, clients) => {\r\n\t\t\t\tclients.forEach((socketListId) => {\r\n\t\t\t\t\tconnections[socketListId] = new RTCPeerConnection(peerConnectionConfig)\r\n\t\t\t\t\t// Wait for their ice candidate       \r\n\t\t\t\t\tconnections[socketListId].onicecandidate = function (event) {\r\n\t\t\t\t\t\tif (event.candidate != null) {\r\n\t\t\t\t\t\t\tsocket.emit('signal', socketListId, JSON.stringify({ 'ice': event.candidate }))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Wait for their video stream\r\n\t\t\t\t\tconnections[socketListId].onaddstream = (event) => {\r\n\t\t\t\t\t\t// TODO mute button, full screen button\r\n\t\t\t\t\t\tvar searchVidep = document.querySelector(`[data-socket=\"${socketListId}\"]`)\r\n\t\t\t\t\t\tif (searchVidep !== null) { // if i don't do this check it make an empyt square\r\n\t\t\t\t\t\t\tsearchVidep.srcObject = event.stream\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telms = clients.length\r\n\t\t\t\t\t\t\tlet main = document.getElementById('main')\r\n\t\t\t\t\t\t\tlet cssMesure = this.changeCssVideos(main)\r\n\r\n\t\t\t\t\t\t\tlet video = document.createElement('video')\r\n\r\n\t\t\t\t\t\t\tlet css = {minWidth: cssMesure.minWidth, minHeight: cssMesure.minHeight, maxHeight: \"100%\", margin: \"10px\",\r\n\t\t\t\t\t\t\t\tborderStyle: \"solid\", borderColor: \"#bdbdbd\", objectFit: \"fill\"}\r\n\t\t\t\t\t\t\tfor(let i in css) video.style[i] = css[i]\r\n\r\n\t\t\t\t\t\t\tvideo.style.setProperty(\"width\", cssMesure.width)\r\n\t\t\t\t\t\t\tvideo.style.setProperty(\"height\", cssMesure.height)\r\n\t\t\t\t\t\t\tvideo.setAttribute('data-socket', socketListId)\r\n\t\t\t\t\t\t\tvideo.srcObject = event.stream\r\n\t\t\t\t\t\t\tvideo.autoplay = true\r\n\t\t\t\t\t\t\tvideo.playsinline = true\r\n\r\n\t\t\t\t\t\t\tmain.appendChild(video)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Add the local video stream\r\n\t\t\t\t\tif (window.localStream !== undefined && window.localStream !== null) {\r\n\t\t\t\t\t\tconnections[socketListId].addStream(window.localStream)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet blackSilence = (...args) => new MediaStream([this.black(...args), this.silence()])\r\n\t\t\t\t\t\twindow.localStream = blackSilence()\r\n\t\t\t\t\t\tconnections[socketListId].addStream(window.localStream)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (id === socketId) {\r\n\t\t\t\t\tfor (let id2 in connections) {\r\n\t\t\t\t\t\tif (id2 === socketId) continue\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tconnections[id2].addStream(window.localStream)\r\n\t\t\t\t\t\t} catch(e) {}\r\n\t\t\t\r\n\t\t\t\t\t\t// eslint-disable-next-line no-loop-func\r\n\t\t\t\t\t\tconnections[id2].createOffer().then((description) => {\r\n\t\t\t\t\t\t\tconnections[id2].setLocalDescription(description)\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tsocket.emit('signal', id2, JSON.stringify({ 'sdp': connections[id2].localDescription }))\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tsilence = () => {\r\n\t\tlet ctx = new AudioContext()\r\n\t\tlet oscillator = ctx.createOscillator()\r\n\t\tlet dst = oscillator.connect(ctx.createMediaStreamDestination())\r\n\t\toscillator.start()\r\n\t\tctx.resume()\r\n\t\treturn Object.assign(dst.stream.getAudioTracks()[0], { enabled: false })\r\n\t}\r\n\tblack = ({ width = 640, height = 480 } = {}) => {\r\n\t\tlet canvas = Object.assign(document.createElement(\"canvas\"), { width, height })\r\n\t\tcanvas.getContext('2d').fillRect(0, 0, width, height)\r\n\t\tlet stream = canvas.captureStream()\r\n\t\treturn Object.assign(stream.getVideoTracks()[0], { enabled: false })\r\n\t}\r\n\r\n\thandleVideo = () => this.setState({ video: !this.state.video }, () => this.getUserMedia())\r\n\thandleAudio = () => this.setState({ audio: !this.state.audio }, () => this.getUserMedia())\r\n\thandleScreen = () => this.setState({ screen: !this.state.screen }, () => this.getDislayMedia())\r\n\r\n\thandleEndCall = () => {\r\n\t\ttry {\r\n\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\ttracks.forEach(track => track.stop())\r\n\t\t} catch (e) {}\r\n\t\twindow.location.href = \"/\"\r\n\t}\r\n\r\n\topenChat = () => this.setState({ showModal: true, newmessages: 0 })\r\n\tcloseChat = () => this.setState({ showModal: false })\r\n\thandleMessage = (e) => this.setState({ message: e.target.value })\r\n\r\n\taddMessage = (data, sender, socketIdSender) => {\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tmessages: [...prevState.messages, { \"sender\": sender, \"data\": data }],\r\n\t\t}))\r\n\t\tif (socketIdSender !== socketId) {\r\n\t\t\tthis.setState({ newmessages: this.state.newmessages + 1 })\r\n\t\t}\r\n\t}\r\n\r\n\thandleUsername = (e) => this.setState({ username: e.target.value })\r\n\r\n\tsendMessage = () => {\r\n\t\tsocket.emit('chat-message', this.state.message, this.state.username)\r\n\t\tthis.setState({ message: \"\", sender: this.state.username })\r\n\t}\r\n\r\n\tcopyUrl = () => {\r\n\t\tlet text = window.location.href\r\n\t\tif (!navigator.clipboard) {\r\n\t\t\tlet textArea = document.createElement(\"textarea\")\r\n\t\t\ttextArea.value = text\r\n\t\t\tdocument.body.appendChild(textArea)\r\n\t\t\ttextArea.focus()\r\n\t\t\ttextArea.select()\r\n\t\t\ttry {\r\n\t\t\t\tdocument.execCommand('copy')\r\n\t\t\t\tmessage.success(\"Link copied to clipboard!\")\r\n\t\t\t} catch (err) {\r\n\t\t\t\tmessage.error(\"Failed to copy\")\r\n\t\t\t}\r\n\t\t\tdocument.body.removeChild(textArea)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tnavigator.clipboard.writeText(text).then(function () {\r\n\t\t\tmessage.success(\"Link copied to clipboard!\")\r\n\t\t}, () => {\r\n\t\t\tmessage.error(\"Failed to copy\")\r\n\t\t})\r\n\t}\r\n\r\n\tconnect = () => this.setState({ askForUsername: false }, () => this.getMedia())\r\n\r\n\tisChrome = function () {\r\n\t\tlet userAgent = (navigator && (navigator.userAgent || '')).toLowerCase()\r\n\t\tlet vendor = (navigator && (navigator.vendor || '')).toLowerCase()\r\n\t\tlet matchChrome = /google inc/.test(vendor) ? userAgent.match(/(?:chrome|crios)\\/(\\d+)/) : null\r\n\t\t// let matchFirefox = userAgent.match(/(?:firefox|fxios)\\/(\\d+)/)\r\n\t\t// return matchChrome !== null || matchFirefox !== null\r\n\t\treturn matchChrome !== null\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(this.isChrome() === false){\r\n\t\t\treturn (\r\n\t\t\t\t<div style={{background: \"white\", width: \"30%\", height: \"auto\", padding: \"20px\", minWidth: \"400px\",\r\n\t\t\t\t\t\ttextAlign: \"center\", margin: \"auto\", marginTop: \"50px\", justifyContent: \"center\"}}>\r\n\t\t\t\t\t<h1>Sorry, this works only with Google Chrome</h1>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{this.state.askForUsername === true ?\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div style={{background: \"white\", width: \"30%\", height: \"auto\", padding: \"20px\", minWidth: \"400px\",\r\n\t\t\t\t\t\t\t\ttextAlign: \"center\", margin: \"auto\", marginTop: \"50px\", justifyContent: \"center\"}}>\r\n\t\t\t\t\t\t\t<p style={{ margin: 0, fontWeight: \"bold\", paddingRight: \"50px\" }}>Set your username</p>\r\n\t\t\t\t\t\t\t<Input placeholder=\"Username\" value={this.state.username} onChange={e => this.handleUsername(e)} />\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={this.connect} style={{ margin: \"20px\" }}>Connect</Button>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div style={{ justifyContent: \"center\", textAlign: \"center\", paddingTop: \"40px\", alignItems: 'center'}}>\r\n\t\t\t\t\t\t\t<video id=\"my-video\" ref={this.localVideoref} autoPlay muted style={{\r\n\t\t\t\t\t\t\t\tborderStyle: \"solid\",borderColor: \"#bdbdbd\",objectFit: \"fill\",width: \"30%\",height: \"30%\"}}></video>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"btn-down\" style={{ backgroundColor: \"whitesmoke\", color: \"whitesmoke\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t\t<IconButton style={{ color: \"#424242\" }} onClick={this.handleVideo}>\r\n\t\t\t\t\t\t\t\t{(this.state.video === true) ? <VideocamIcon /> : <VideocamOffIcon />}\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t<IconButton style={{ color: \"#f44336\" }} onClick={this.handleEndCall}>\r\n\t\t\t\t\t\t\t\t<CallEndIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t<IconButton style={{ color: \"#424242\" }} onClick={this.handleAudio}>\r\n\t\t\t\t\t\t\t\t{this.state.audio === true ? <MicIcon /> : <MicOffIcon />}\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t{this.state.screenAvailable === true ?\r\n\t\t\t\t\t\t\t\t<IconButton style={{ color: \"#424242\" }} onClick={this.handleScreen}>\r\n\t\t\t\t\t\t\t\t\t{this.state.screen === true ? <ScreenShareIcon /> : <StopScreenShareIcon />}\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t: null}\r\n\r\n\t\t\t\t\t\t\t<Badge badgeContent={this.state.newmessages} max={999} color=\"secondary\" onClick={this.openChat}>\r\n\t\t\t\t\t\t\t\t<IconButton style={{ color: \"#424242\" }} onClick={this.openChat}>\r\n\t\t\t\t\t\t\t\t\t<ChatIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<Modal show={this.state.showModal} onHide={this.closeChat} style={{ zIndex: \"999999\" }}>\r\n\t\t\t\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t\t\t\t<Modal.Title>Chat Room</Modal.Title>\r\n\t\t\t\t\t\t\t</Modal.Header>\r\n\t\t\t\t\t\t\t<Modal.Body style={{ overflow: \"auto\", overflowY: \"auto\", height: \"400px\", textAlign: \"left\" }} >\r\n\t\t\t\t\t\t\t\t{this.state.messages.length > 0 ? this.state.messages.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t<div key={index} style={{textAlign: \"left\"}}>\r\n\t\t\t\t\t\t\t\t\t\t<p style={{ wordBreak: \"break-all\" }}><b>{item.sender}</b>: {item.data}</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)) : <p>No message yet</p>}\r\n\t\t\t\t\t\t\t</Modal.Body>\r\n\t\t\t\t\t\t\t<Modal.Footer className=\"div-send-msg\">\r\n\t\t\t\t\t\t\t\t<Input placeholder=\"Message\" value={this.state.message} onChange={e => this.handleMessage(e)} />\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={this.sendMessage}>Send</Button>\r\n\t\t\t\t\t\t\t</Modal.Footer>\r\n\t\t\t\t\t\t</Modal>\r\n\r\n\t\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t\t<div style={{ paddingTop: \"20px\" }}>\r\n\t\t\t\t\t\t\t\t<Input value={window.location.href} disable=\"true\"></Input>\r\n\t\t\t\t\t\t\t\t<Button style={{backgroundColor: \"#3f51b5\",color: \"whitesmoke\",marginLeft: \"20px\",\r\n\t\t\t\t\t\t\t\t\tmarginTop: \"10px\",width: \"120px\",fontSize: \"10px\"\r\n\t\t\t\t\t\t\t\t}} onClick={this.copyUrl}>Copy invite link</Button>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<Row id=\"main\" className=\"flex-container\" style={{ margin: 0, padding: 0 }}>\r\n\t\t\t\t\t\t\t\t<video id=\"my-video\" ref={this.localVideoref} autoPlay muted style={{\r\n\t\t\t\t\t\t\t\t\tborderStyle: \"solid\",borderColor: \"#bdbdbd\",margin: \"10px\",objectFit: \"fill\",\r\n\t\t\t\t\t\t\t\t\twidth: \"50%\",height: \"50%\"}}>\r\n\r\n\t\t\t\t\t\t\t\t</video>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Video;"]},"metadata":{},"sourceType":"module"}